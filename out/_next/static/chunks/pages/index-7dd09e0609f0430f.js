(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(35381)}])},56681:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(85893),r=s(67294),l=s(31955),i=s(24461);s(99106);let a="Something went wrong. Please try again.";function o(e){let{hostConfig:t,onLoggedIn:s,defaultEmail:o=""}=e,[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(o),[x,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(""),[p,b]=(0,r.useState)(!1),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{h(o)},[o]);let j=async()=>{try{b(!0),d("");let e=await fetch("/api/hosted/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,orgID:t.orgID})});if(e.status>=400){let t=await e.json();d(t.userMessage||a),b(!1);return}if(!e.ok){d(a),b(!1);return}await e.json(),m(!0),setTimeout(()=>{y.current.focus()},100)}catch(e){console.error(e),d(a)}b(!1)},v=async()=>{try{b(!0),d("");let e=await fetch("/api/hosted/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,code:f,orgID:t.orgID})});if(e.status>=400){let t=await e.json();d(t.userMessage||a),b(!1);return}if(!e.ok){d(a),b(!1);return}let n=await e.json();l.Z.set("org_token",n.token,{expires:30}),null==s||s()}catch(e){console.error(e),d(a)}b(!1)};return(0,n.jsxs)("div",{children:[x?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsxs)("div",{className:"my-1 font-semibold",children:["Enter the code in your email (",u,"):"]}),(0,n.jsx)("input",{ref:y,type:"text",disabled:p,placeholder:"XXXXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-zinc-700 text-xl text-center",value:f,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),v())}})]}),c&&(0,n.jsx)("div",{className:"text-center text-red-500 text-sm font-semibold my-2",children:c}),(0,n.jsxs)("div",{className:"my-4 flex items-center justify-center gap-2",children:[(0,n.jsxs)("button",{onClick:v,disabled:p||!f,className:"flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors gap-2",children:[p?(0,n.jsx)(i.Z,{}):null,"Submit"]}),(0,n.jsx)("button",{onClick:()=>m(!1),disabled:p,className:"flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-black bg-white-600 hover:bg-white-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white-500 disabled:bg-gray-400 disabled:cursor-default transition-colors gap-2 disabled:text-white dark:text-white",children:"Cancel"})]})]}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)("div",{className:"my-1 font-semibold",children:"Enter your email:"}),(0,n.jsx)("input",{type:"email",disabled:p,placeholder:"example@gmail.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700",value:u,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),j())}})]}),c&&(0,n.jsx)("div",{className:"text-center text-red-500 text-sm font-semibold my-2",children:c}),(0,n.jsx)("div",{className:"my-4 flex items-center justify-center gap-2",children:(0,n.jsxs)("button",{onClick:j,disabled:p||!u,className:"flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors gap-2",children:[p?(0,n.jsx)(i.Z,{}):null,"Send Code"]})})]}),(0,n.jsxs)("div",{className:"text-xs font-semibold text-gray-500 text-center px-4 mt-4",children:["You will receive a verification email from ",(0,n.jsx)("b",{children:"hosted@typingmind.com"}),". Please check your spam folder if you don't see it in your inbox."]})]})}},35381:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return td}});var n=s(85893),r=s(51448),l=s(67294),i=s(78672),a=s(54426),o=s(81354),c=s.n(o),d=s(87260),u=s(89583);let h=(0,i.eK)("useAPIKey");function x(e){let{decryptedApiKey:t,setDecryptedApiKey:s,open:r,setOpen:i}=e,[o,x]=h(""),[m,f]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),b=(0,l.useRef)();(0,l.useEffect)(()=>{setTimeout(()=>{t.startsWith("encrypted-")&&i(!0)},500)},[]),(0,l.useEffect)(()=>{r&&setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.focus()},500)},[r]);let y=async()=>{x(""),setTimeout(()=>{window.location.reload()},500)},j=async()=>{try{if(!m)return;p("");let e=t.replace("encrypted-","");e=e.substring(0,e.length-5);let n=c().AES.decrypt(e,m).toString(c().enc.Utf8);n?(s(n),i(!1)):p("Incorrect password.")}catch(e){console.error(e),p("Incorrect password.")}};return(0,n.jsxs)(d.Z,{open:r,setOpen:i,showCloseButton:!1,children:[(0,n.jsx)("div",{className:"text-lg font-semibold text-center",children:"\uD83D\uDD10 Enter Password:"}),(0,n.jsx)("div",{className:"text-sm text-gray-500 text-center",children:"To unlock your API Key"}),(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)("input",{type:"password",placeholder:"Enter password",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700",value:m,autoComplete:"off",onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),j())},ref:b})}),g?(0,n.jsx)("div",{className:"text-sm text-red-500 text-center",children:g}):null,(0,n.jsx)("div",{className:"my-2 text-center",children:(0,n.jsxs)("button",{onClick:j,disabled:!m,type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 gap-2",children:[(0,n.jsx)(u.jcU,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Unlock"})]})}),(0,n.jsx)("div",{className:"text-gray-500 text-xs text-center",children:"If you forgot your password, you can clear your API Key and password, then enter your API Key again."}),(0,n.jsx)("div",{className:"my-2 text-center",children:(0,n.jsx)(a.Z,{onConfirmed:y,className:"text-red-500 text-sm hover:underline",confirmText:()=>(0,n.jsx)("span",{className:"text-red-500 text-sm hover:underline",children:"Are you sure?"}),children:(0,n.jsx)("span",{children:"Clear API Key and Password"})})})]})}var m=s(56681),f=s(24461);function g(e){let{hostConfig:t,open:s,setOpen:r,orgActive:l}=e;return(0,n.jsx)(d.Z,{wide:!0,open:s,setOpen:r,showCloseButton:!1,children:l?(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:"Please login first"}),(0,n.jsxs)("p",{className:"my-4 text-sm text-center",children:[(0,n.jsx)("b",{children:t.name})," requires an account. Please login to continue."]}),(0,n.jsx)(m.Z,{hostConfig:t,onLoggedIn:()=>{window.location.reload()}}),(0,n.jsx)("div",{className:"mt-4 text-center flex items-center justify-center space-x-2",children:(0,n.jsx)("button",{onClick:()=>r(!1),className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-800 dark:text-zinc-100 dark:disabled:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:text-gray-400",children:(0,n.jsx)("span",{children:"I'll login later"})})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold text-orange-500",children:"This chat instance is not active"}),(0,n.jsxs)("p",{className:"my-4 text-sm text-center",children:[(0,n.jsx)("b",{children:t.name})," is not activated. Please contact the admin of this Chat instance to resolve this."]}),(0,n.jsxs)("p",{className:"my-4 text-sm text-center",children:["If you are an admin of ",(0,n.jsx)("b",{children:t.name}),", please login to the"," ","Admin Panel to activate your chat instance."]}),(0,n.jsx)("p",{className:"my-4 text-sm text-center",children:(0,n.jsx)("a",{href:"/admin",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 gap-2",children:"→ Login to Admin Panel"})})]})})}(0,i.eK)("useLicenseKey");var p=s(60357),b=s.n(p);function y(e){let{hostConfig:t,onLoggedIn:s}=e,[r,i]=(0,l.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mb-2",onClick:()=>i(!0),children:"→ Member Login"}),(0,n.jsxs)(d.Z,{open:r,setOpen:()=>i(!1),showCloseButton:!1,children:[(0,n.jsxs)("h2",{className:"text-lg text-center my-4 font-semibold",children:["Login to ",t.name]}),(0,n.jsx)(m.Z,{hostConfig:t,onLoggedIn:s})]})]})}var j=s(31955),v=s(49704),w=s.n(v);function N(e){let{hostConfig:t}=e,[s,r]=(0,l.useState)(null);(0,l.useEffect)(()=>{i()},[]);let i=()=>{let e=j.Z.get("org_token"),t=w().decode(e);r(null==t?void 0:t.user)},o=()=>{j.Z.remove("org_token"),r(null),window.location.reload()};return(0,n.jsx)("div",{children:s?(0,n.jsxs)("div",{className:"text-white text-sm space-y-1 text-center mb-1",children:[(0,n.jsxs)("div",{children:["\uD83D\uDC4B Welcome, ",(0,n.jsx)("b",{children:s.email})]}),(0,n.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,n.jsx)(a.Z,{onConfirmed:o,className:"text-red-500 font-semibold cursor-pointer hover:underline",children:"Logout"})})]}):(0,n.jsx)(y,{hostConfig:t,onLoggedIn:()=>{window.location.reload()}})})}var k=s(76606);let C=(0,i.eK)("useTMCloudEnabled");function S(){let[e,t]=C(!1),{syncStatus:s}=(0,k.m)();return e?"scheduled"===s?(0,n.jsx)("div",{className:"absolute bottom-1 right-1 w-2 h-2 rounded-full bg-orange-500"}):"started"===s?(0,n.jsx)("div",{className:"absolute bottom-1 right-1 w-2 h-2 rounded-full bg-green-500"}):"error"===s?(0,n.jsxs)("div",{className:"absolute bottom-1 right-1 w-2 h-2 rounded-full bg-red-500",children:[" ",(0,n.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 rounded-full bg-red-500 animate-ping"})]}):null:(0,n.jsx)(u.Wh,{className:"absolute bottom-1 right-1 w-2 h-2 shadow text-yellow-500"})}function T(){let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{var e=0;for(var s in localStorage)localStorage.hasOwnProperty(s)&&(e+=localStorage.getItem(s).length,s.substring(0,5));var n=5242880-e;t({usagePercentage:(e/5242880*100).toFixed(2),usedSpace:e,totalSpace:5242880,availableSpace:n})},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-bold",children:"Local Storage"}),(0,n.jsxs)("div",{className:"text-xs my-2",children:["All of your data is stored locally in your browser. Each browser has a different limit of how much data you can store, the general limit is"," ",(0,n.jsx)("b",{children:"5MB"}),". If you are running out of space, you can delete some of your old chats."]}),e?(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)("div",{className:"my-2 h-6 w-full bg-green-500 rounded-lg overflow-hidden relative",children:(0,n.jsx)("div",{style:{width:"".concat(e.usedSpace/e.totalSpace*100,"%")},className:"h-6 w-full bg-red-500 absolute top-0 left-0 bottom-0"})}),(0,n.jsxs)("div",{className:"flex items-center justify-between ",children:[(0,n.jsxs)("div",{children:["Used: ",(0,n.jsx)("b",{children:(e.usedSpace/1024/1024).toFixed(2)+" MB"})," ","(",e.usagePercentage,"%)"]}),(0,n.jsxs)("div",{children:["Available:"," ",(0,n.jsx)("b",{children:(e.availableSpace/1024/1024).toFixed(2)+" MB"})," "]})]})]}):null,(0,n.jsx)("div",{className:"text-xs my-2 font-semibold text-orange-500",children:"Please export and backup your chats regularly to avoid data lost!"})]})}var A=s(34339);let D=(0,i.eK)("useGoogleDriveBackup");function O(){let[e,t]=D(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:" flex items-center justify-between",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold flex items-center justify-start gap-2",children:[(0,n.jsxs)("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg","aria-label":"Google Drive",role:"img",viewBox:"0 0 512 512",children:[(0,n.jsx)("rect",{width:512,height:512,rx:"15%",fill:"#fff"}),(0,n.jsx)("g",{fill:"#2684fc",children:(0,n.jsx)("path",{id:"b",d:"M337 301l53 96q-3 2-10 2h-247.6 q-6 0-10-2l55-95"})}),(0,n.jsx)("g",{fill:"#ea4335",children:(0,n.jsx)("path",{id:"c",d:"M335 301l55 96q6-3 10-10l43-76q2-6 2-10"})}),(0,n.jsxs)("g",{transform:"rotate(120 256 256)",children:[(0,n.jsx)("use",{href:"#b",fill:"#00ac47"}),(0,n.jsx)("use",{href:"#c",fill:"#0066da"})]}),(0,n.jsxs)("g",{transform:"rotate(240 256 256)",children:[(0,n.jsx)("use",{href:"#b",fill:"#ffba00"}),(0,n.jsx)("use",{href:"#c",fill:"#00832d"})]})]}),"Google Drive"]}),(0,n.jsx)("div",{className:"text-gray-500 font-semibold italic",children:"(Coming soon)"})]}),(0,n.jsxs)("div",{className:"text-xs my-2",children:["Use ",(0,n.jsx)("b",{children:"Google Drive"})," to backup and sync your data across devices."]})]})}var I=s(34656);function E(e){let{chats:t,setChats:s}=e,{sync:r,reSyncEverything:l,syncError:i,syncLoading:a,syncStats:o}=(0,k.m)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a?(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs font-semibold text-gray-500",children:[(0,n.jsx)(f.Z,{}),(0,n.jsx)("span",{children:"Syncing..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:r,className:"text-blue-500 font-semibold",children:"→ Sync Changes"}),o?(0,n.jsx)("button",{onClick:l,className:"text-blue-500 font-semibold",children:"→ Re-sync everything"}):null]}),(0,n.jsx)("div",{className:"text-xs text-gray-500 font-semibold text-left",children:"Sync will be triggered automatically every time you chat or open the app. To trigger a sync manually, click the Sync button in the sidebar menu."}),o?(0,n.jsxs)("div",{className:"text-xs text-gray-500 font-semibold text-right",children:["Last Sync: ",new Date(o.lastSyncAt).toLocaleString()," (",(0,I.Z)(new Date(o.lastSyncAt)),")"]}):(0,n.jsx)("div",{className:"text-xs text-gray-500 font-semibold text-right",children:"Last Sync: Never"})]}),i&&(0,n.jsx)("div",{className:"text-red-500 mt-4",children:i})]})}var P=s(99106);let K="Something went wrong. Please try again.";function L(e){let{onLoggedIn:t,defaultEmail:s}=e,[r,i]=(0,l.useState)(null),[a,o]=(0,l.useState)(s),[c,d]=(0,l.useState)(!1),[u,h]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),g=(0,l.useRef)(null),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{o(s)},[s]),(0,l.useEffect)(()=>{open&&(o(s),d(!1),h(""),i(null))},[open]);let b=async()=>{try{m(!0),i("");let e=await fetch((0,P.v9)()+"/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})});if(e.status>=400){let t=await e.json();i(t.userMessage||K),m(!1);return}if(!e.ok){i(K),m(!1);return}await e.json(),d(!0),setTimeout(()=>{p.current.focus()},100)}catch(e){console.error(e),i(K)}m(!1)},y=async()=>{try{m(!0),i("");let e=await fetch((0,P.v9)()+"/api/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,code:u})});if(e.status>=400){let t=await e.json();i(t.userMessage||K),m(!1);return}if(!e.ok){i(K),m(!1);return}let s=await e.json();j.Z.set("typingmindcloud_token",s.token,{expires:30}),null==t||t()}catch(e){console.error(e),i(K)}m(!1)};return(0,n.jsx)("div",{children:c?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsxs)("div",{className:"my-1 font-semibold",children:["Enter the code in your email (",a,"):"]}),(0,n.jsx)("input",{ref:p,type:"text",disabled:x,placeholder:"XXXXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-zinc-700 text-xl text-center",value:u,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),y())}})]}),r&&(0,n.jsx)("div",{className:"text-center text-red-500 text-sm font-semibold my-2",children:r}),(0,n.jsxs)("div",{className:"my-4 flex items-center justify-center gap-2",children:[(0,n.jsxs)("button",{onClick:y,disabled:x||!u,className:"flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors gap-2",children:[x?(0,n.jsx)(f.Z,{}):null,"Submit"]}),(0,n.jsx)("button",{onClick:()=>d(!1),disabled:x,className:"flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-black bg-white-600 hover:bg-white-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white-500 disabled:bg-gray-400 disabled:cursor-default transition-colors gap-2 disabled:text-white dark:text-white",children:"Cancel"})]})]}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)("div",{className:"my-1 font-semibold",children:"Enter your email:"}),(0,n.jsx)("input",{ref:g,type:"email",disabled:x,placeholder:"example@gmail.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700",value:a,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),b())}})]}),r&&(0,n.jsx)("div",{className:"text-center text-red-500 text-sm font-semibold my-2",children:r}),(0,n.jsx)("div",{className:"my-4 flex items-center justify-center gap-2",children:(0,n.jsxs)("button",{onClick:b,disabled:x||!a,className:"flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors gap-2",children:[x?(0,n.jsx)(f.Z,{}):null,"Send Code"]})})]})})}function _(e){var t,s;let{licensePayload:r}=e,[i,o]=(0,l.useState)(!0),[c,d]=(0,l.useState)(null),[u,h]=(0,l.useState)(!1),{scheduleSync:x}=(0,k.m)();(0,l.useEffect)(()=>{f()},[r]);let m=()=>{j.Z.remove("typingmindcloud_token"),d(null)},f=()=>{let e=j.Z.get("typingmindcloud_token"),t=w().decode(e);d(t)};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)("div",{children:c?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:" flex items-center justify-between text-gray-500",children:[(0,n.jsxs)("div",{children:["Account:"," ",(0,n.jsx)("span",{className:"font-semibold",children:null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.email})]}),(0,n.jsx)(a.Z,{onConfirmed:m,className:"text-red-500",confirmText:()=>(0,n.jsx)("span",{className:"text-red-500 underline",children:"Sure?"}),children:"Logout"})]}),(0,n.jsx)("hr",{className:"my-2"}),(0,n.jsx)(E,{})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-base font-semibold my-4",children:"Signup TypingMind Cloud Backup & Sync"}),(0,n.jsxs)("div",{className:"text-xs space-y-2",children:[(0,n.jsx)("div",{children:"Please read the following carefully."}),(0,n.jsxs)("ul",{className:"list-disc pl-4",children:[(0,n.jsxs)("li",{children:["All of your saved chats, messages, and prompts will be uploaded to ",(0,n.jsx)("b",{children:"cloud.typingmind.com"})," so that it can be synced between devices. We don't store your API Key, License Key, or any other personal information."]}),(0,n.jsx)("li",{children:"Your data will be associated with your TypingMind Cloud account. You can register an account with your License Key automatically and claim 10MB of data storage for free."}),(0,n.jsxs)("li",{children:["We use ",(0,n.jsx)("b",{children:"planetscale.com"})," to store your data. Your data on TypingMind Cloud is AES encrypted both in transit and at rest."]}),(0,n.jsxs)("li",{children:["This feature is current in ",(0,n.jsx)("b",{children:"Beta"}),". There are some known small bugs, but the sync feature generally working well. Please report any bugs you found using the Send Feedback button. Thank you!"]}),(0,n.jsxs)("li",{children:["For more information, please refer to our"," ",(0,n.jsx)("a",{href:"/privacy",target:"_blank",rel:"noreferrer",className:"text-blue-500",children:"Privacy Policy"})," ","and"," ",(0,n.jsx)("a",{href:"/terms",target:"_blank",rel:"noreferrer",className:"text-blue-500",children:"Terms of Service"}),"."]})]})]}),(0,n.jsxs)("label",{className:"flex items-center justify-center gap-2 my-4",children:[(0,n.jsx)("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked)}),(0,n.jsx)("span",{children:"I have read and understand the above."})]}),u?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(A.Z,{enabled:i,setEnabled:o,label:"Sign up/Login with your License Key's email"})}),(0,n.jsx)("div",{className:"max-w-xs mx-auto",children:(0,n.jsx)(L,{defaultEmail:i?null==r?void 0:null===(s=r.payload)||void 0===s?void 0:s.email:"",onLoggedIn:()=>{f(),x()}})})]}):null]})})})}let F=(0,i.eK)("useTMCloudEnabled");function M(e){let{licensePayload:t}=e,[s,r]=F(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:" flex items-center justify-between",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold flex items-center justify-start gap-2",children:[(0,n.jsx)(u.H_w,{className:"h-5 w-5 text-blue-500"}),"TypingMind Cloud"," ",(0,n.jsx)("span",{className:"text-white text-xs bg-blue-500 font-semibold px-2 py-1 rounded-full",children:"Beta"})]}),(0,n.jsx)(A.Z,{enabled:s,setEnabled:e=>{r(e)}})]}),s?(0,n.jsx)("div",{className:"my-4 bg-gray-100 px-3 py-3 rounded-lg border border-gray-200 dark:bg-zinc-800 dark:border-gray-600",children:(0,n.jsx)(_,{licensePayload:t})}):(0,n.jsxs)("div",{className:"text-xs my-2",children:[(0,n.jsx)("b",{children:"TypingMind Cloud"})," provides a cloud storage for your data. You can backup your data to the cloud and sync your data across devices."]})]})}var Z=s(67266),B=s.n(Z);function R(e){let{open:t,setOpen:s,licensePayload:r}=e;return(0,n.jsxs)(d.Z,{wide:!0,open:t,setOpen:s,showCloseButton:!1,delayMount:!0,children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:"Backup & Sync"}),(0,n.jsx)("hr",{className:"my-4"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(T,{}),(0,n.jsx)(M,{licensePayload:r}),(0,n.jsx)(O,{})]})]})}function z(e){let{licensePayload:t,setOpenBackupSync:s}=e,[r,i]=(0,l.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>i(!0),type:"button",className:"bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs hover:bg-gray-500 transition-all space-x-2 mr-2 relative",children:[(0,n.jsx)(u.Qvc,{className:"w-4 h-4"}),(0,n.jsx)(S,{})]}),(0,n.jsx)(R,{open:r,setOpen:i,licensePayload:t})]})}function W(e){let{setChats:t,wait:s=5e3,showCoruptedMessage:r=!0,emptyMessage:a=()=>null}=e,[o,c]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{console.log("ChatsCoruptCheck");let e=(0,P.FW)((0,i.NW)().filter(e=>e.startsWith("CHAT_")).map(e=>{try{return JSON.parse((0,i.cF)().getItem(e))}catch(e){console.error(e)}}).filter(Boolean));c(e)},s);return()=>{clearTimeout(e)}},[]),o.length?(0,n.jsxs)("div",{className:"m-2 p-2 bg-yellow-500 text-black rounded-lg text-xs space-y-2 max-w-xs mx-auto text-center",children:[(0,n.jsxs)("div",{children:[r?"Hmm... it seems like your chats are corrupted. ":"","We found ",(0,n.jsx)("b",{children:o.length})," chats that we were able to restore."]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("button",{onClick:()=>t(o),type:"button",className:"rounded-full border border-blue-500 px-3 py-1 text-sm my-0 hover:bg-blue-600 transition-all space-x-1 bg-blue-500 text-white",children:"Restore Now"})})]}):a()}let U=(0,i.eK)("useSoundMode");function H(){let[e,t]=U(!0);return(0,n.jsx)("button",{onClick:()=>{t(!e)},type:"button",className:"bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs hover:bg-gray-500 transition-all space-x-2 mr-2",children:e?(0,n.jsx)(u.rxG,{className:"w-4 h-4"}):(0,n.jsx)(u.xZH,{className:"w-4 h-4"})})}var q=s(8193);let J=(0,i.eK)("useLicenseKey"),Y="Something went wrong. Please try again.";function G(e){let{open:t,setOpen:s,setOpenBuy:r,setLicenseVerified:i,verifyLicenseKey:a}=e,[o,c]=J(""),[u,h]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),[g,p]=(0,l.useState)(""),[b,y]=(0,l.useState)(!0),j=(0,l.useRef)();(0,l.useEffect)(()=>{o?y(!0):y(!1)},[]),(0,l.useEffect)(()=>{t&&(p(""),o?y(!0):y(!1),h(""),setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},700))},[t]),(0,l.useEffect)(()=>{h(o)},[o]);let v=async()=>{if(""===u){c(""),s(!1),i(!1);return}try{m(!0),p("");let e=await fetch("https://www.typingmind.com/api/license",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:u})});if(500===e.status){await e.json(),p("Could not connect to Licenes Server. Please try again later."),m(!1);return}if(e.status>=400){let t=await e.json();p(t.userMessage||Y),m(!1);return}if(!e.ok){p(Y),m(!1);return}await a(u),c(u),s(!1),i(!0)}catch(e){console.error(e),p(Y)}m(!1)};return(0,n.jsxs)(d.Z,{open:t,setOpen:s,showCloseButton:!1,children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:"Enter License Key"}),(0,n.jsxs)("p",{className:"my-2 text-sm",children:["Enter ",(0,n.jsx)("b",{children:"Typing Mind License Key"})," to unlock all premium features."]}),(0,n.jsx)("div",{className:"my-4 z-100 relative",children:b?(0,n.jsxs)("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700 text-right flex items-center justify-end gap-4",children:[(0,n.jsxs)("span",{children:["**************************",o.slice(-4)]}),(0,n.jsx)("button",{onClick:()=>{y(!1),h(""),setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},100)},className:"text-blue-500 hover:underline",children:"Change Key"})]}):(0,n.jsx)("input",{type:"text",ref:j,disabled:x,placeholder:"Enter your license key here",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700",value:u,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"!==e.key||u&&u.startsWith("sk-")||(e.preventDefault(),v())}})}),g&&(0,n.jsx)("div",{className:"my-2 text-sm text-red-500 text-center",children:g}),u&&u.startsWith("sk-")?(0,n.jsx)("p",{className:"my-2 text-sm text-red-500",children:"Uh oh! That looks like an OpenAI API Key, not a License Key. Please enter your license key instead."}):null,b?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"my-2 text-sm",children:["Don't have one?"," ",(0,n.jsx)("button",{onClick:()=>{s(!1),setTimeout(()=>{r(!0)},500)},className:"text-blue-500 hover:underline",children:"→ Buy A License Key"})]}),(0,n.jsxs)("p",{className:"my-2 text-sm",children:["Lost your license key? →"," ",(0,n.jsx)("a",{className:"text-blue-500 hover:underline",href:"https://app.lemonsqueezy.com/my-orders/",target:"_blank",rel:"noopener noreferrer",children:"Recover License Key"})]}),(0,n.jsx)("div",{className:"my-4 text-center flex items-center justify-center space-x-2",children:(0,n.jsxs)("button",{disabled:x||u&&u.startsWith("sk-"),onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:bg-gray-500",children:[x?(0,n.jsx)(f.Z,{}):(0,n.jsx)(q.bzc,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Activate License"})]})}),(0,n.jsx)("p",{className:"my-2 text-xs",children:"The app will connect to TypingMind.com license server to verify your license key."})]})]})}var X=s(53854);let V=(0,i.eK)("useDarkTheme");function Q(){let[e,t]=V(!1);return(0,l.useEffect)(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),(0,n.jsx)("button",{onClick:()=>t(!e),type:"button",className:"bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs hover:bg-gray-500 transition-all space-x-2 mr-2",children:e?(0,n.jsx)(X.Lac,{className:"h-4 w-4"}):(0,n.jsx)(X.q4P,{className:"w-4 h-4"})})}let $=(0,i.eK)("useAPIKey");function ee(){let[e,t]=$(""),[s,r]=(0,l.useState)(e.startsWith("encrypted-")),[i,a]=(0,l.useState)(""),o=async()=>{let s=c().AES.encrypt(e,i);t(e=>"encrypted-"+s+"-"+e.slice(-4))};return e?e.startsWith("encrypted-")?(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)("div",{className:"text-sm font-semibold text-green-500 text-center",children:"\uD83D\uDD12 Your API key is encrypted with a password"}),(0,n.jsx)("div",{className:"text-xs text-gray-500 text-center",children:'If you forgot or want to change your password, click "Change Key" and enter the API key again.'})]}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-blue-600",checked:s,onChange:e=>r(e.target.checked)}),(0,n.jsx)("span",{children:"\uD83D\uDD10 Encrypt API key with password"})]}),s?(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)("div",{className:"text-sm font-semibold my-1",children:"Enter Password:"}),(0,n.jsx)("div",{className:"text-xs text-gray-500 my-1",children:"TypingMind will ask for your password every time you open the app. If you forget your password, you will need to enter your API key again."}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"password",placeholder:"Enter password",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700",value:i,autoComplete:"off",onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o())}})}),(0,n.jsx)("div",{className:"my-2 text-center",children:(0,n.jsxs)("button",{onClick:o,disabled:!i,type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-gray-400 gap-2",children:[(0,n.jsx)(u.kUi,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Lock"})]})})]}):null]}):null}var et=s(39026);let es=(0,i.eK)("useAPIKey"),en=(0,i.eK)("useTokenUsage");function er(e){var t,s,r,i,o,c,h,x;let{decryptedApiKey:m,onCompleted:g,setOpenDecrypt:p}=e,[b,y]=es(""),[j,v]=(0,l.useState)(""),[w,N]=(0,l.useState)(!1),[k,C]=(0,l.useState)(!1),[S,T]=(0,l.useState)(!1),[A,D]=(0,l.useState)(""),[O,I]=(0,l.useState)(!1),[E,K]=(0,l.useState)(!1),[L,_]=en([]),F=(0,l.useRef)(null);(0,l.useEffect)(()=>{b&&K(!0)},[b]);let M=async()=>{if(m.startsWith("encrypted-")){p(!0);return}T(!0),v(""),b?K(!0):K(!1)},Z=async()=>{if(v(""),null!==A){if(""===A){y(""),g&&g();return}await B(A)&&(y(A),C(!0),g&&g())}},B=async e=>{N(!0);try{let t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:"hello"}]})});if(401===t.status)return N(!1),v("Invalid API key. Please make sure your API key is still working properly."),null;if(429===t.status)return N(!1),v((0,n.jsxs)("span",{children:["Your API key is not working. You need a ",(0,n.jsx)("b",{children:"paid API account"})," on OpenAI in order to use the ChatGPT API Key (the free trial won't work). To verify that you have a paid API account, go here and make sure you have your billing info added:"," ",(0,n.jsx)("u",{children:"https://platform.openai.com/account/billing/overview"}),". Note that you ",(0,n.jsx)("b",{children:"do not"})," need to have a ChatGPT Plus subscription, it's ",(0,n.jsx)("b",{children:"not needed"}),". If you already have a paid OpenAI account, check to see if you still have sufficient credits. Also, try creating a new API key and trying again. If this problem persists, please contact support."]})),null;if(!t.ok)return v("Could not connect to OpenAI API. Please try again later. This could be because OpenAI's server is experiencing high demand and rejected your request. Go to https://status.openai.com/ to check their status. Error code: "+t.status),N(!1),null;let s=await t.json();return N(!1),s}catch(e){v("Could not connect to OpenAI API from your browser. This could be a network issue or adblock. Please try again or contact support. Open Developer Console to see more details."),console.error(e)}N(!1)},R=(0,l.useMemo)(()=>(0,P.nF)(L),[L]);return(0,n.jsxs)("div",{className:"",children:[b?(0,n.jsx)("button",{onClick:M,disabled:w,className:"bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs font-medium w-full hover:bg-gray-500 transition-all",children:m.startsWith("encrypted-")?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.kUi,{className:"text-red-400 mr-2 h-4 w-4 flex-shrink-0","aria-hidden":"true"}),(0,n.jsx)("span",{className:"font-mono text-red-400",children:"(Locked)"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.bzc,{className:"text-green-500 mr-2 h-4 w-4 flex-shrink-0","aria-hidden":"true"}),(0,n.jsx)("span",{className:"font-mono",children:b?"$".concat((null==R?void 0:null===(t=R.totalCostUSD)||void 0===t?void 0:t.toFixed(5))||0):""})]})}):(0,n.jsxs)("button",{disabled:w,className:"bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs font-medium w-full hover:bg-gray-500 transition-all space-x-1",onClick:M,children:[w?(0,n.jsx)(f.Z,{}):(0,n.jsx)(q.CSE,{className:"text-yellow-500 h-4 w-4 flex-shrink-0","aria-hidden":"true"}),(0,n.jsx)("span",{children:"Enter API Key"})]}),(0,n.jsxs)(d.Z,{open:S,setOpen:T,showCloseButton:!1,children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:"\uD83D\uDD11 Enter OpenAI API Key:"}),(0,n.jsx)("div",{className:"text-center my-4",children:(0,n.jsx)("a",{className:"text-blue-500 text-xs hover:underline",target:"_blank",rel:"noopener noreferrer",href:"https://platform.openai.com/account/api-keys",children:"→ Get your API key from OpenAI dashboard."})}),(0,n.jsx)("div",{className:"text-xs",children:"Your API Key is stored locally on your browser and never sent anywhere else."}),(0,n.jsx)("div",{className:"my-4",children:E?(0,n.jsxs)("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700 text-right flex items-center justify-end gap-4",children:[(0,n.jsxs)("span",{children:["**************************",b.slice(-4)]}),(0,n.jsx)("button",{onClick:()=>{K(!1),D(""),setTimeout(()=>{var e;null===(e=F.current)||void 0===e||e.focus()},100)},className:"text-blue-500 hover:underline",children:"Change Key"})]}):(0,n.jsx)("input",{type:"text",ref:F,placeholder:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700",value:A,autoComplete:"off",onChange:e=>D(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Z())},disabled:w})}),(0,n.jsx)(ee,{}),j?(0,n.jsx)("div",{className:"text-sm text-center text-red-500",children:j}):null,E?(0,n.jsxs)("div",{className:"my-4 text-left bg-green-100 dark:bg-sky-900 px-2 py-1 rounded-md",children:[(0,n.jsx)("div",{className:"my-4 text-center cursor-pointer hover:underline font-semibold",children:"\uD83D\uDCB8 Token Usage Report"}),(0,n.jsxs)("ul",{className:"list-disc pl-4 text-left space-y-1 text-sm",children:[(0,n.jsxs)("li",{children:["Recorded since: ",(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:(null==R?void 0:null===(s=R.startDate)||void 0===s?void 0:s.toLocaleString())||"(None)"})]}),(0,n.jsxs)("li",{children:["Tokens used for messages: ",(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:(null==R?void 0:null===(r=R.messageTokens)||void 0===r?void 0:r.toLocaleString())||0})," ",(0,n.jsxs)("b",{children:["($",(null==R?void 0:null===(i=R.messageCostUSD)||void 0===i?void 0:i.toFixed(5))||0,")"]})]}),(0,n.jsxs)("li",{children:["Tokens used for enhanced features (*): ",(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:(null==R?void 0:null===(o=R.enhancedTokens)||void 0===o?void 0:o.toLocaleString())||0})," ",(0,n.jsxs)("b",{children:["($",(null==R?void 0:null===(c=R.enhancedCostUSD)||void 0===c?void 0:c.toFixed(5))||0,")"]})]}),(0,n.jsxs)("li",{children:["Total token usage (*): ",(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:(null==R?void 0:null===(h=R.totalTokens)||void 0===h?void 0:h.toLocaleString())||0})," ",(0,n.jsxs)("b",{children:["($",(null==R?void 0:null===(x=R.totalCostUSD)||void 0===x?void 0:x.toFixed(5))||0,")"]})]})]}),(0,n.jsx)("div",{className:"my-4 text-center",children:(0,n.jsx)(a.Z,{onConfirmed:()=>_([]),className:"text-red-500 hover:underline",children:"Reset Usage Data"})}),(0,n.jsx)("div",{className:"my-2",children:"(*) See more info below:"}),(0,n.jsx)(et.Z,{})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"my-2 text-center space-x-2 flex items-center justify-center",children:(0,n.jsxs)("button",{disabled:w,onClick:()=>Z(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:bg-gray-400",children:[w?(0,n.jsx)(f.Z,{}):(0,n.jsx)(q.bzc,{className:"w-4 h-4"}),b&&!A?(0,n.jsx)("span",{children:"Remove API Key"}):(0,n.jsx)("span",{children:"Save API Key"})]})}),(0,n.jsx)("div",{className:"my-4 text-xs",children:"The app will connect to OpenAI API server to check if your API Key is working properly."}),(0,n.jsx)("div",{className:"my-4 text-center font-semibold",children:(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{className:"my-4 cursor-pointer hover:underline",children:"API Key not working? Click Here."}),(0,n.jsxs)("ul",{className:"list-disc pl-4 text-left space-y-4",children:[(0,n.jsxs)("li",{children:["Make sure you have your billing info added in"," ",(0,n.jsx)("a",{className:"text-blue-500 hover:underline",target:"_blank",rel:"noopener noreferrer",href:"https://platform.openai.com/account/billing/overview",children:"OpenAI Billing"})," ","page. Without billing info, your API key will not work."]}),(0,n.jsxs)("li",{children:["OpenAI's ChatGPT API key is VERY cheap. You pay for what you use."," ",(0,n.jsx)("a",{className:"text-blue-500 hover:underline",target:"_blank",rel:"noopener noreferrer",href:"https://openai.com/pricing#language-models",children:"The price"})," ","is roughly about 100,000 words per $1."]}),(0,n.jsx)("li",{children:"A ChatGPT Plus Subscription is NOT needed."})]})]})})]})]})]})}var el=s(23235);function ei(e){let{licenseVerified:t,setOpenLicenseKey:s}=e,r=(0,l.useRef)(),[i,a]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{null===r.current||r.current||!t||i||a(!0),r.current=t},[t]),(0,n.jsxs)("div",{children:[i?(0,n.jsx)(el.Z,{}):null,(0,n.jsx)("button",{onClick:()=>s(!0),className:"bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs font-medium w-full hover:bg-gray-500 transition-all",children:!0===t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.bzc,{className:"text-green-500 mr-2 h-4 w-4 flex-shrink-0","aria-hidden":"true"}),"Activated"]}):!1===t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.CSE,{className:"text-yellow-500 mr-2 h-4 w-4 flex-shrink-0","aria-hidden":"true"}),"Unlicensed"]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.CSE,{className:"text-yellow-500 mr-2 h-4 w-4 flex-shrink-0 opacity-0","aria-hidden":"true"})})})]})}(0,i.eK)("useLicenseKey");var ea=s(55623),eo=s(39590),ec=s(5434);function ed(e){let{link:t="mailto:feedback@typingmind.com"}=e,[s,r]=(0,l.useState)(!1);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{onClick:()=>r(!0),type:"button",className:"bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs hover:bg-gray-500 transition-all space-x-2 mr-2",children:[(0,n.jsx)(ec.fsM,{className:"h-4 w-4","aria-hidden":"true"}),(0,n.jsx)("span",{children:"Send Feedback"})]}),(0,n.jsx)(d.Z,{open:s,setOpen:r,children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-center",children:"Send Feedback"}),(0,n.jsx)("p",{className:"my-4",children:"All feedback, suggestions, feature requests, and bug reports are welcomed!"}),(0,n.jsx)("p",{className:"my-4",children:(0,n.jsx)("a",{href:t,className:"text-blue-600 hover:underline",target:"_blank",rel:"noreferrer noopener",children:t.startsWith("mailto:")?t.slice(7):t})})]})})]})}var eu=s(93463);function eh(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}var ex=(0,l.memo)(function(e){var t;let{chat:s,thin:r,onEditName:i,onDelete:o,onSelect:c,selected:d,highlightedTitle:h,highlightedPreview:x,onToggleFavorite:m}=e,[f,g]=(0,l.useState)(!1),[p,b]=(0,l.useState)(s.title||"New Chat"),y=(0,l.useRef)(null);(0,l.useEffect)(()=>{b(s.title||"New Chat")},[s.title]);let j=e=>{null==m||m(s),e.preventDefault(),e.stopPropagation()},v=()=>{g(!0),setTimeout(()=>{y.current.focus(),y.current.setSelectionRange((null==p?void 0:p.length)||0,(null==p?void 0:p.length)||0)},100)},w=()=>{g(!1),b(s.title)},N=()=>{p&&(g(!1),i(s.id,p))};return(0,n.jsxs)("div",{className:eh(d?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","group flex items-center text-sm font-medium w-full space-x-2 justify-between overflow-hidden"),children:[(0,n.jsxs)("div",{onClick:()=>{f||null==c||c(s)},className:"flex items-center justify-start gap-x-2 min-w-0 w-full px-2 py-2 text-sm group cursor-pointer",children:[(0,n.jsx)(X.wIw,{className:eh("text-gray-300 h-6 w-6 flex-shrink-0 hidden sm:block",s.favoritedAt?"sm:hidden":"sm:group-hover:hidden"),"aria-hidden":"true"}),(0,n.jsx)("button",{onClick:j,className:eh("flex-shrink-0",s.favoritedAt?"":" sm:hidden sm:group-hover:block"),children:s.favoritedAt?(0,n.jsx)(q.pHD,{className:"text-yellow-500 "+(r?"h-4 w-4":"h-6 w-6"),"aria-hidden":"true"}):(0,n.jsx)(q.y5j,{className:r?"h-4 w-4":"h-6 w-6","aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"space-y-1 text-left w-full min-w-0",children:[f?(0,n.jsx)(eu.Z,{type:"text",ref:y,value:p,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),N()),"Escape"===e.key&&(e.preventDefault(),w())},onChange:e=>b(e.target.value),className:"bg-gray-900 text-white rounded-sm px-0 py-0 border-0 ring-blue-500 focus:ring-2 ring-2 sm:text-sm font-medium w-full text-base"}):(0,n.jsx)("div",{className:"text-gray-100 truncate w-full",children:h||p||"New Chat"}),r?null:(0,n.jsx)("div",{className:"text-xs text-gray-400 font-normal truncate  w-full",children:x||(null==s?void 0:null===(t=s.preview)||void 0===t?void 0:t.substring(0,50))})]})]}),(0,n.jsx)("div",{className:"pr-2",children:f?(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("button",{onClick:N,className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(u.l_A,{className:"w-6 h-6 sm:w-4 sm:h-4"})}),(0,n.jsx)("button",{onClick:w,className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(u.aHS,{className:"w-6 h-6 sm:w-4 sm:h-4"})})]}):(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("button",{onClick:v,className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(q.QML,{className:"w-6 h-6 sm:w-4 sm:h-4"})}),(0,n.jsx)(a.Z,{onConfirmed:()=>o(s.id),className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(q.YK6,{className:"w-6 h-6 sm:w-4 sm:h-4"})})]})})]})}),em=s(57632),ef=s(4510);function eg(e){let{open:t,setOpen:s}=e,{openAIStatus:r}=(0,ef.NZ)();return(0,n.jsxs)(d.Z,{open:t,setOpen:s,showCloseButton:!1,wide:!0,children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:r===ef.yZ.OK?"OpenAI Status: OK":r===ef.yZ.SLOW?"OpenAI Status: Slow":"OpenAI Status: Unavailable"}),r===ef.yZ.OK?(0,n.jsxs)("p",{className:"my-2 text-sm",children:[(0,n.jsx)("div",{className:"flex items-center justify-center my-10",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full animate-ping"})})}),(0,n.jsxs)("div",{className:"my-4",children:["The green dot indicates that OpenAI API services are working normally. When it turns red",(0,n.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full inline-block mx-2 align-middle"}),", that means OpenAI is slow or unresponsive due to high demand or other reasons."]})]}):r===ef.yZ.SLOW?(0,n.jsxs)("p",{className:"my-2 text-sm",children:[(0,n.jsx)("div",{className:"flex items-center justify-center my-10",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-full",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-full animate-ping"})})}),(0,n.jsxs)("div",{className:"my-4",children:["We are receiving multiple reports of OpenAI being slow or unresponsive. This is likely due to high demand. If your message is not being sent, please try again later. This issue will usually be resolved within a few hours. If it takes too long, go to"," ",(0,n.jsx)("a",{href:"https://status.openai.com",target:"_blank",rel:"noopenner noreferer",className:"text-blue-500",children:"https://status.openai.com"})," ","to check OpenAI service's status."]})]}):(0,n.jsxs)("p",{className:"my-2 text-sm",children:[(0,n.jsx)("div",{className:"flex items-center justify-center my-10",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-full",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-full animate-ping"})})}),"This could be because OpenAI's server is experiencing high demand or having an outage. Usually, the issue will goes away pretty quick. You can try to send your message again every few minutes. If it takes too long, go to"," ",(0,n.jsx)("a",{href:"https://status.openai.com",target:"_blank",rel:"noopenner noreferer",className:"text-blue-500",children:"https://status.openai.com"})," ","to check their service status."]}),(0,n.jsx)("div",{className:"mt-4 text-center flex items-center justify-center space-x-2",children:(0,n.jsx)("button",{onClick:()=>{s(!1)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:bg-gray-500",children:(0,n.jsx)("span",{children:"Got it"})})})]})}var ep=s(60887);function eb(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}let ey=e=>{var t;let{children:s,onEdit:r,onDelete:i,folder:o,shouldOpen:c=!1,numberOfChats:d,dragHandle:h}=e,[x,m]=(0,l.useState)(Boolean(o.open)),[f,g]=(0,l.useState)(Boolean(o.new)),[p,b]=(0,l.useState)("New Folder"),{over:y,active:j}=(0,ep.Cj)();(0,ep.IJ)({onDragEnd:e=>{var t,s;let{active:n,over:r}=e;(null===(t=n.data)||void 0===t?void 0:null===(s=t.current)||void 0===s?void 0:s.type)!=="SORTABLE_FOLDER"&&(null==r?void 0:r.id)===o.id&&m(!0)}});let v=(0,l.useRef)(null);(0,l.useEffect)(()=>{o.new||(g(!1),b(o.title))},[o]),(0,l.useEffect)(()=>{c&&m(c)},[]),(0,l.useEffect)(()=>{o.new&&o.open&&setTimeout(()=>{var e,t,s;null===(e=v.current)||void 0===e||e.focus(),null===(t=v.current)||void 0===t||t.setSelectionRange(0,(null===(s=o.title)||void 0===s?void 0:s.length)||0)},100)},[]);let w=()=>{r({...o,title:p,updatedAt:new Date,syncedAt:null,new:!1}),b(void 0),g(!1)},N=()=>{b(void 0),g(!1),o.new&&r({...o,new:!1})},k=()=>{g(!0),b(o.title),setTimeout(()=>{var e,t;v.current.focus(),v.current.setSelectionRange((null===(e=o.title)||void 0===e?void 0:e.length)||0,(null===(t=o.title)||void 0===t?void 0:t.length)||0)},100)};(0,l.useEffect)(()=>{if(f){var e;null===(e=v.current)||void 0===e||e.focus()}},[f]),(0,l.useEffect)(()=>{o.open!==x&&r({...o,open:x})},[x]);let C=(null===(t=null==j?void 0:j.data.current)||void 0===t?void 0:t.type)==="SORTABLE_FOLDER",S=!C&&(null==y?void 0:y.id)===o.id;return(0,l.useEffect)(()=>{let e=setTimeout(()=>{S&&m(!0)},700);return()=>{clearTimeout(e)}},[S]),(0,l.useEffect)(()=>{C&&m(!1)},[C]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:eb("focus-within:bg-gray-900 focus-within:text-white text-gray-300 hover:bg-gray-700 hover:text-white","group flex items-center text-sm font-medium w-full space-x-2 justify-between overflow-hidden"),...f?void 0:{...null==h?void 0:h.attributes,...null==h?void 0:h.listeners},children:[(0,n.jsxs)("button",{onClick:()=>{f||m(!x)},className:"flex items-center justify-start space-x-2 min-w-0 w-full px-2 py-2 text-sm",children:[x?(0,n.jsx)(X.kWQ,{className:eb("text-gray-300 h-6 w-6 flex-shrink-0"),"aria-hidden":"true"}):(0,n.jsx)(X.MOd,{className:eb("text-gray-300 h-6 w-6 flex-shrink-0"),"aria-hidden":"true"}),(0,n.jsx)("div",{className:"space-y-1 text-left w-full min-w-0",children:f?(0,n.jsx)(eu.Z,{type:"text",ref:v,value:void 0===p?o.title:p,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w()),"Escape"===e.key&&(e.preventDefault(),N())},onChange:e=>b(e.target.value),className:"bg-gray-900 text-white rounded-sm px-0 py-0 border-0 ring-blue-500 focus:ring-2 ring-2 sm:text-sm font-medium w-full text-base"}):(0,n.jsxs)("div",{className:"text-gray-100 w-full flex",children:[(0,n.jsx)("div",{className:"truncate min-w-0",children:o.title||"(Untitled)"}),(0,n.jsxs)("div",{className:"ml-1 whitespace-nowrap opacity-50",children:["(",d," ",1===d?"chat":"chats",")"]})]})})]}),(0,n.jsx)("div",{className:"pr-2",children:f?(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("button",{onClick:w,className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(u.l_A,{className:"w-6 h-6 sm:w-4 sm:h-4"})}),(0,n.jsx)("button",{onClick:N,className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(u.aHS,{className:"w-6 h-6 sm:w-4 sm:h-4"})})]}):(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("button",{onClick:k,className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(q.QML,{className:"w-6 h-6 sm:w-4 sm:h-4"})}),(0,n.jsx)(a.Z,{onConfirmed:i,className:"text-gray-500 hover:text-white transiton-all",children:(0,n.jsx)(q.YK6,{className:"w-6 h-6 sm:w-4 sm:h-4"})})]})})]}),(0,n.jsxs)("div",{className:eb("pl-6 space-y-2 relative hidden",x&&"!block"),children:[s,d>0&&(0,n.jsx)("div",{className:"absolute top-0 -translate-y-5 left-5 h-[calc(100%+20px)] w-[1px] bg-white/20 -translate-x-1/2"})]})]})},ej=e=>{let{onDragEnd:t,children:s,onDragStart:r,onDragOver:l}=e,i=(0,ep.Dy)((0,ep.VT)(ep.MA,{activationConstraint:{distance:15}}),(0,ep.VT)(ep.LO,{activationConstraint:{delay:200,tolerance:5}}));return(0,n.jsx)(ep.LB,{sensors:i,onDragEnd:t,onDragStart:r,onDragOver:l,children:s})};var ev=s(45587);let ew=(0,i.eK)("useChatsInFolder"),eN=(0,i.eK)("useFolderList"),ek=e=>{let{children:t,chats:s}=e,[r,a]=(0,l.useState)(null),[o,c]=ew({}),[d,u]=eN([]),h=e=>{let{active:t}=e;a(t)},x=e=>{var t,s,n,r,l;let{active:a,over:o}=e;if((null===(t=a.data)||void 0===t?void 0:null===(s=t.current)||void 0===s?void 0:s.type)==="SORTABLE_FOLDER"){if((null===(r=o.data)||void 0===r?void 0:null===(l=r.current)||void 0===l?void 0:l.type)!=="SORTABLE_FOLDER")return;u(e=>{let t=e.findIndex(e=>e.id===a.id),s=e.findIndex(e=>e.id===o.id);return(0,ev.Rp)(e,t,s).map((e,t)=>({...e,order:t,syncedAt:null}))});return}let d=null===(n=a.data.current)||void 0===n?void 0:n.container,h=null==o?void 0:o.id;if(!d||!h||d===h)return;c(e=>"ROOT"===d?{...e,[h]:[...e[h]||[],a.id]}:"ROOT"===h?{...e,[d]:e[d].filter(e=>e!==a.id)}:{...e,[d]:e[d].filter(e=>e!==a.id),[h]:[...e[h]||[],a.id]});let x=a.id,m=(0,P.dC)((0,i.cF)().getItem("CHAT_"+x));m&&(0,i.cF)().setItem("CHAT_"+x,JSON.stringify({...m,folderID:"ROOT"===h?null:h,updatedAt:new Date,syncedAt:null}))},m=(0,l.useMemo)(()=>{var e,t;if(!r)return null;if((null==r?void 0:null===(e=r.data)||void 0===e?void 0:null===(t=e.current)||void 0===t?void 0:t.type)==="SORTABLE_FOLDER"){let e=d.find(e=>e.id===r.id);return e?(0,n.jsx)(ey,{folder:e,numberOfChats:r.data.current.numberOfChats,onEdit:()=>{},onDelete:()=>{}}):null}let l=s.find(e=>e.id===r.id);return l?(0,n.jsx)("div",{className:"bg-gray-700 select-none",children:(0,n.jsx)(ex,{chat:l})}):null},[r,s,d]);return(0,n.jsxs)(ej,{onDragStart:h,onDragEnd:x,children:[t,(0,n.jsx)(ep.y9,{children:m})]})};function eC(e){var t,s;let{id:r,data:l,children:i,className:a}=e,{isOver:o,setNodeRef:c,active:d}=(0,ep.Zj)({id:r,data:l}),u=o&&(null===(t=null==d?void 0:d.data.current)||void 0===t?void 0:t.container)!==r&&(null===(s=null==d?void 0:d.data.current)||void 0===s?void 0:s.type)!=="SORTABLE_FOLDER";return(0,n.jsx)("div",{ref:c,className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}(u&&"bg-blue-500/30",a),children:i})}function eS(e){let{id:t,data:s,children:r}=e,{attributes:l,listeners:i,setNodeRef:a,isDragging:o}=(0,ep.O1)({id:t,data:s});return(0,n.jsx)("div",{ref:a,style:{opacity:o?.3:void 0},...i,...l,children:(0,n.jsx)("div",{className:"select-none lg:select-auto touch-manipulation",children:r})})}var eT=s(24285);function eA(e){let{id:t,data:s,customHandlePosition:r,children:l}=e,{attributes:i,listeners:a,setNodeRef:o,transform:c,transition:d,isDragging:u}=(0,ev.nB)({id:t,data:s}),h={transform:eT.ux.Transform.toString(c),transition:d,zIndex:u?10:void 0,position:u?"relative":void 0,opacity:u?.3:void 0};return(0,n.jsx)("div",{ref:o,style:h,...r?void 0:a,...r?void 0:i,children:"function"==typeof l&&r?l({listeners:a,isDragging:u,attributes:i}):l})}let eD=(0,i.eK)("useFolderList"),eO=(0,i.eK)("useChatsInFolder"),eI=(0,i.eK)("useDeletedFolderIDs");function eE(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}let eP=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r={},l=e.filter(e=>{if(""===t)return!0;let s=(e.title||"").toLowerCase().includes(t.toLowerCase()),l=[];try{let t=JSON.parse((0,i.cF)().getItem("CHAT_"+e.id));t&&(l=t.messages)}catch(e){console.error(e)}let a=l.some(e=>e.content.toLowerCase().includes(t.toLowerCase()));if(r[e.id]={},s){let s=[],l=e.title.toLowerCase().indexOf(t.toLowerCase());s.push(e.title.substring(0,l),(0,n.jsx)("span",{className:"bg-yellow-700",children:e.title.substring(l,l+t.length)}),e.title.substring(l+t.length)),r[e.id].title=s}if(a){let s=[],i=l.map(e=>e.content.toLowerCase()).findIndex(e=>e.toLowerCase().includes(t.toLowerCase())),a=l[i].content,o=a.toLowerCase().indexOf(t.toLowerCase()),c=a.substring(Math.max(0,o-10),Math.min(a.length,o+20)),d=c.toLowerCase().indexOf(t.toLowerCase());s.push("...",c.substring(0,d),(0,n.jsx)("span",{className:"bg-yellow-700",children:c.substring(d,d+t.length)}),c.substring(d+t.length),"..."),r[e.id].preview=s}return s||a}).slice(0,s);return{filteredChats:l,highlighted:r}},eK=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"updatedAt";return[...e].sort((e,s)=>"updatedAt"===t?e.updatedAt?s.updatedAt?new Date(s.updatedAt).getTime()-new Date(e.updatedAt).getTime():-1:1:"title"===t?e.title.localeCompare(s.title):void 0)};function eL(e){var t,s,r,i,a,o;let{chats:c,chatID:d,onDeleteChat:h,onDeleteChats:x,onEditChatTitle:m,onNewChatRequested:f,onChatSelected:g,sidebarOpen:p,setSidebarOpen:y,licenseVerified:j,setLicenseVerified:v,setOpenBuy:w,onOpenSettings:C,hostConfig:T,onToggleFavorite:A,licensePayload:D,setOpenBackupSync:O,links:I,verifyLicenseKey:E,decryptedApiKey:P,setOpenDecrypt:K}=e,[L,_]=(0,l.useState)(0),[F,M]=(0,l.useState)(!1),[Z,B]=(0,l.useState)(""),[R,W]=(0,l.useState)(null),[U,J]=(0,l.useState)(!1),[Y,V]=(0,l.useState)(!1),{openAIStatus:$}=(0,ef.NZ)(),[ee,et]=eD([]),[es,en]=eI([]),[el,ea]=eO({}),{syncStatus:eo,scheduleSync:ec}=(0,k.m)();(0,l.useEffect)(()=>{M(!0)},[]);let eu=()=>{f(),y(!1),setTimeout(()=>{let e=document.getElementById("chat-input-textbox");e&&e.focus()},100)},eh=()=>{et(e=>[{id:"fo-"+(0,em.Z)(),title:"New Folder",new:!0,open:!0,createdAt:new Date,updatedAt:new Date,syncedAt:null},...e].map((e,t)=>({...e,order:t})))},ep=e=>{et(t=>{let s=t.findIndex(t=>t.id===e.id),n=[...t];return n[s]={...e,updatedAt:new Date,syncedAt:null},n})},eb=e=>{en(t=>[...t,e]),et(ee.filter(t=>t.id!==e)),ea(t=>{let s={...t};return delete s[e],s})};if(!F)return null;let{filteredChats:ej,highlighted:ew}=eP(eK(c),Z),eN=ej.filter(e=>e.favoritedAt),eT=(()=>{let e={};return ej.forEach(t=>{for(let n of ee){var s;if(null===(s=el[n.id])||void 0===s?void 0:s.includes(t.id)){e[n.id]=[...e[n.id]||[],t];return}}e.ROOT=[...e.ROOT||[],t]}),e})();return(0,n.jsxs)("div",{onTouchMove:e=>{if(!R)return;let t=e.touches[0].clientX-R;t<-100&&y(!1)},onTouchStart:e=>{W(e.touches[0].clientX)},onTouchEnd:()=>{W(null)},className:"jsx-7078ffb922cb3c38 flex min-h-0 flex-1 flex-col bg-gray-800",children:[(0,n.jsx)("div",{id:"navbar",className:"jsx-7078ffb922cb3c38 flex flex-1 flex-col overflow-y-auto pb-4",children:(0,n.jsxs)("nav",{className:"jsx-7078ffb922cb3c38 flex-1 space-y-2 bg-gray-800 flex flex-col ",children:[(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 px-2 space-y-2 sticky z-30 top-0 bg-gray-800 py-2",children:[(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 flex items-center justify-center space-x-2",children:[(0,n.jsxs)("button",{onClick:eu,className:"jsx-7078ffb922cb3c38 "+(eE("bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-2 text-sm font-medium w-full hover:bg-gray-500 transition-all")||""),children:[(0,n.jsx)(X.wIw,{className:eE("text-gray-300 mr-2 h-6 w-6 flex-shrink-0"),"aria-hidden":"true"}),"New Chat"]}),"init"!==eo&&(0,n.jsxs)("button",{onClick:()=>{"error"===eo||"init"===eo?O(!0):ec()},disabled:"ready"!==eo&&"error"!==eo&&"init"!==eo,className:"jsx-7078ffb922cb3c38 "+(eE("bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-2 text-sm font-medium hover:bg-gray-500 transition-all w-12 shrink-0 relative disabled:hover:bg-gray-700 disabled:bg-gray-700 disabled:text-gray-500")||""),children:[(0,n.jsx)(q.IDO,{className:eE("h-6 w-6 flex-shrink-0","started"===eo?"animate-spin":""),"aria-hidden":"true"}),(0,n.jsx)(S,{})]}),(0,n.jsx)("button",{onClick:C,className:"jsx-7078ffb922cb3c38 "+(eE("bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-2 text-sm font-medium hover:bg-gray-500 transition-all w-12 shrink-0")||""),children:(0,n.jsx)(X.XlX,{className:eE("text-gray-300 h-6 w-6 flex-shrink-0"),"aria-hidden":"true"})})]}),(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 relative flex items-center space-x-2",children:[(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 relative w-full",children:[(0,n.jsx)("input",{type:"text",placeholder:"Search chats...",value:Z,onChange:e=>B(e.target.value),onKeyDown:e=>{27===e.keyCode&&B("")},className:"jsx-7078ffb922cb3c38 bg-gray-700 text-white px-2 py-1 rounded-md w-full"}),Z?(0,n.jsx)("button",{onClick:()=>B(""),className:"jsx-7078ffb922cb3c38 absolute right-0 top-0 bottom-0 flex items-center justify-center px-2 text-white",children:(0,n.jsx)(q.oHP,{className:"w-4 h-4"})}):null]}),(0,n.jsx)("button",{onClick:()=>{eh()},className:"jsx-7078ffb922cb3c38 text-gray-500 hover:text-white transiton-all flex items-center justify-center w-12 shrink-0",children:(0,n.jsx)(u.RHD,{className:"w-6 h-6"})})]}),(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 max-h-[200px] overflow-auto",children:Z?null:eN.map(e=>{var t,s;return(0,n.jsx)(ex,{thin:!0,chat:e,onToggleFavorite:A,highlightedTitle:null===(t=ew[e.id])||void 0===t?void 0:t.title,highlightedPreview:null===(s=ew[e.id])||void 0===s?void 0:s.preview,onSelect:g,selected:e.id===d,onDelete:h,onEditName:m},e.id)})}),eN.length>0&&(0,n.jsx)("hr",{className:"jsx-7078ffb922cb3c38 border-gray-700"})]}),0===ej.length?Z?(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 text-gray-500 text-center",children:[(0,n.jsx)("p",{className:"jsx-7078ffb922cb3c38 text-sm",children:"No results"}),(0,n.jsxs)("p",{className:"jsx-7078ffb922cb3c38 text-xs",children:['No result found for "',Z,'"']})]}):(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 flex flex-col items-center justify-center p-4 border border-dashed border-2 border-gray-500 rounded-lg mx-2",children:(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 text-gray-500 text-center",children:[(0,n.jsx)("p",{className:"jsx-7078ffb922cb3c38 text-sm",children:"No Chats Yet"}),(0,n.jsx)("p",{className:"jsx-7078ffb922cb3c38 text-xs",children:"Click the button above to start a new chat"})]})}):null,(0,n.jsxs)(ek,{chats:c,children:[(0,n.jsx)(ev.Fo,{items:ee,strategy:ev.qw,children:ee.map(e=>{let t=eT[e.id]||[],s=t.map(e=>e.id);return Z&&!t.length?null:(0,n.jsx)(eA,{id:e.id,data:{type:"SORTABLE_FOLDER",numberOfChats:t.length},customHandlePosition:!0,children:r=>{let{listeners:l,attributes:i}=r;return(0,n.jsx)(eC,{id:e.id,children:(0,n.jsx)(ey,{folder:e,onEdit:ep,onDelete:()=>eb(e.id),shouldOpen:!!Z||(null==s?void 0:s.includes(d)),numberOfChats:t.length,dragHandle:{listeners:l,attributes:i},children:t.map(t=>{var s,r;return(0,n.jsx)(eS,{id:t.id,data:{container:e.id},children:(0,n.jsx)(ex,{chat:t,onToggleFavorite:A,highlightedTitle:null===(s=ew[t.id])||void 0===s?void 0:s.title,highlightedPreview:null===(r=ew[t.id])||void 0===r?void 0:r.preview,onSelect:g,selected:t.id===d,onDelete:h,onEditName:m})},t.id)})})})}},e.id)})}),(0,n.jsx)(eC,{id:"ROOT",className:"flex-1 pb-4",children:null===(t=eT.ROOT)||void 0===t?void 0:t.map(e=>{var t,s;return(0,n.jsx)(eS,{id:e.id,data:{container:"ROOT"},children:(0,n.jsx)(ex,{chat:e,onToggleFavorite:A,highlightedTitle:null===(t=ew[e.id])||void 0===t?void 0:t.title,highlightedPreview:null===(s=ew[e.id])||void 0===s?void 0:s.preview,onSelect:g,selected:e.id===d,onDelete:h,onEditName:m})},e.id)})})]})]})}),(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 flex flex-col flex-shrink-0 bg-gray-700 p-3 justify-center space-y-1",children:[(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 flex items-center justify-center",children:T.managed?(0,n.jsx)(N,{hostConfig:T}):(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 mb-2 grid grid-cols-2 gap-2",children:[(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 text-xs text-white font-semibold flex items-center justify-end",children:"License Key"}),(0,n.jsx)(ei,{licenseVerified:j,setOpenLicenseKey:J}),(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 text-xs text-white font-semibold flex items-center justify-end",children:"OpenAI API Key"}),(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 flex items-center relative",children:[(0,n.jsx)(er,{setOpenDecrypt:K,decryptedApiKey:P}),$===ef.yZ.OK&&(0,n.jsx)("button",{onClick:()=>V(!0),className:"jsx-7078ffb922cb3c38 flex items-center justify-center absolute left-full ml-2",children:(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 "+(eE("h-3 w-3 rounded-full bg-green-500")||"")})}),$===ef.yZ.SLOW&&(0,n.jsx)("button",{onClick:()=>V(!0),className:"jsx-7078ffb922cb3c38 flex items-center justify-center absolute left-full ml-2",children:(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 "+(eE("h-3 w-3 rounded-full bg-yellow-500")||""),children:(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 "+(eE("h-3 w-3 rounded-full bg-yellow-500 animate-ping")||"")})})})]}),$===ef.yZ.ERROR&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 text-xs text-white font-semibold flex items-center justify-end",children:"OpenAI Status"}),(0,n.jsxs)("button",{onClick:()=>V(!0),className:"jsx-7078ffb922cb3c38 bg-gray-600 text-white group flex items-center justify-center rounded-md px-2 py-1 text-xs font-medium w-full hover:bg-gray-500 transition-all",children:[(0,n.jsxs)("span",{className:"jsx-7078ffb922cb3c38 relative flex h-3 w-3 shrink-0",children:[(0,n.jsx)("span",{className:"jsx-7078ffb922cb3c38 animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,n.jsx)("span",{className:"jsx-7078ffb922cb3c38 relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),(0,n.jsx)("p",{className:"jsx-7078ffb922cb3c38 text-xs text-white ml-2",children:"Error"})]})]})]})}),(0,n.jsx)(G,{open:U,setOpen:J,setOpenBuy:w,setLicenseVerified:v,verifyLicenseKey:E}),(0,n.jsx)(eg,{open:Y,setOpen:V}),(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38  border-t border-gray-500 py-1"}),(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 text-xs text-gray-400 font-semibold text-center",children:[T.hosted?T.brand:(0,n.jsx)("a",{href:"https://typingmind.com",className:"jsx-7078ffb922cb3c38",children:"TypingMind.com"})," ","\xa9 ",(0,n.jsx)("span",{className:"jsx-7078ffb922cb3c38",children:new Date().getFullYear()})]}),T.hosted?(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 text-xs text-gray-400 text-center",children:[(0,n.jsx)("a",{href:(null==T?void 0:null===(s=T.links)||void 0===s?void 0:s.privacy)||"#",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"Privacy"})," | ",(0,n.jsx)("a",{href:(null==T?void 0:null===(r=T.links)||void 0===r?void 0:r.terms)||"#",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"Terms"})," | ",(0,n.jsx)("a",{href:(null==T?void 0:null===(i=T.links)||void 0===i?void 0:i.faqs)||"#",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"FAQs"}),T.managed?(0,n.jsxs)(n.Fragment,{children:[" | ",(0,n.jsx)("a",{href:"/admin",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"Admin"})]}):null]}):(0,n.jsxs)("div",{className:"jsx-7078ffb922cb3c38 text-xs text-gray-400 text-center",children:[(0,n.jsx)("a",{href:"/privacy",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"Privacy"})," | ",(0,n.jsx)("a",{href:"/terms",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"Terms"})," | ",(0,n.jsx)("a",{href:"/faqs",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"FAQs"})," | ",(0,n.jsx)("a",{href:"/contact",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"Contact"})," | ",(0,n.jsx)("a",{rel:"noopener noreferrer",href:"https://tdinh.notion.site/tdinh/Typing-Mind-Changelog-b23c1d7de373417bbad50247f7a1a7cb",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline",children:"Changelog"})]}),T.managed?(0,n.jsxs)("div",{style:{fontSize:10},className:"jsx-7078ffb922cb3c38 text-gray-400 text-center",children:[T.brand," is powered by"," ",(0,n.jsx)("a",{target:"_blank",href:"https://typingmind.com",className:"jsx-7078ffb922cb3c38 inline-block",children:"TypingMind AI Chat"})]}):T.hosted?null:(0,n.jsx)("div",{className:"jsx-7078ffb922cb3c38 text-xs text-gray-400 text-center",children:(0,n.jsxs)("a",{href:"/custom",target:"_blank",className:"jsx-7078ffb922cb3c38 hover:underline font-semibold",children:["→ ",(0,n.jsx)("b",{className:"jsx-7078ffb922cb3c38 text-green-500",children:"NEW!"})," Custom Deployment for teams"]})}),(0,n.jsxs)("div",{onClick:()=>_(L+1),className:"jsx-7078ffb922cb3c38 text-center flex items-center justify-center pb-safe",children:[T.hosted?(null==T?void 0:null===(a=T.links)||void 0===a?void 0:a.feedback)?(0,n.jsx)(ed,{link:null==T?void 0:null===(o=T.links)||void 0===o?void 0:o.feedback}):null:(0,n.jsx)(ed,{}),(0,n.jsx)(Q,{}),(0,n.jsx)(H,{}),(0,n.jsx)(z,{licensePayload:D})]})]}),(0,n.jsx)(b(),{id:"7078ffb922cb3c38",children:"#navbar.jsx-7078ffb922cb3c38{color-scheme:dark}"})]})}var e_=s(96907);let eF="Something went wrong. Please try again.";function eM(e){let{children:t}=e,[s,r]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),[o,c]=(0,l.useState)(""),[u,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("continue");t?(setTimeout(()=>{window.history.replaceState({},document.title,"/")},1e3),x(t),r(!0)):h([])},[]);let x=async e=>{a(!0),c("");try{await new Promise(e=>setTimeout(e,2e3));let t=await fetch("https://www.typingmind.com/api/share?id="+e,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status>=400){let e=await t.json();c(e.userMessage||eF),a(!1),h([]);return}if(!t.ok){c(eF),a(!1),h([]);return}let s=await t.json();h(s.messages)}catch(e){c(eF),h([]),console.error(e)}a(!1),r(!1)};return(0,n.jsxs)(n.Fragment,{children:[null!==u?t({defaultMessages:u}):null,(0,n.jsx)(d.Z,{open:s,setOpen:r,showCloseButton:!1,children:(0,n.jsxs)("div",{className:"my-4 text-center",children:[i?(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 my-4",children:[(0,n.jsx)(f.Z,{}),(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:"Loading Chat..."})]}):null,o&&(0,n.jsx)("div",{className:"text-red-500",children:o})]})})]})}var eZ=s(83991);let eB=(0,i.eK)("useExampleFilled");function eR(e){let{onLoaded:t}=e,[s,n]=eB(!1);return(0,l.useEffect)(()=>{setTimeout(()=>{try{if(s)return;let e=JSON.parse((0,i.cF)().getItem("TM_useChatList")||"[]");if(e.length>0)return;eZ.f.forEach(e=>{(0,i.cF)().setItem("CHAT_"+e.chatID,JSON.stringify(e))});let r=(0,P.FW)(eZ.f);(0,i.cF)().setItem("TM_useChatList",JSON.stringify(r)),n(!0),t&&t()}catch(e){console.error(e)}},3e3)},[]),null}var ez=s(41908);let eW=(0,i.eK)("useDismissMacWarning");function eU(){let[e,t]=eW(!1),[s,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{!e&&window.navigator.userAgent.includes("TypingMindMac")&&r(!0)},[]),(0,n.jsxs)(d.Z,{open:s,setOpen:r,showCloseButton:!1,children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold flex items-center justify-center space-x-2",children:(0,n.jsx)("span",{children:"Known Issues in macOS app:"})}),(0,n.jsx)("div",{className:"my-2 text-center text-xs",children:"Welcome to using TypingMind on macOS! Please be informed about the following known issues in the macOS app. We are working hard to improve the app every day!"}),(0,n.jsxs)("ul",{className:"my-4 pl-4 list-disc",children:[(0,n.jsx)("li",{children:"Chats Export/Import is not supported."}),(0,n.jsx)("li",{children:"Updating user's profile picture is not supported."}),(0,n.jsx)("li",{children:"Domain Check Integration is not supported"}),(0,n.jsx)("li",{children:"Voice input is not supported."}),(0,n.jsx)("li",{children:"PDF export is not supportd."})]}),(0,n.jsxs)("div",{className:"my-2 text-center gap-2 flex items-center justify-center",children:[(0,n.jsx)("button",{onClick:()=>r(!1),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:bg-gray-500",children:(0,n.jsx)("span",{children:"Got it!"})}),(0,n.jsx)("button",{onClick:()=>{t(!0),r(!1)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 space-x-1 disabled:bg-gray-500",children:(0,n.jsx)("span",{children:"Don't show again"})})]})]})}var eH=s(60155);function eq(e){let{open:t,setOpen:s,setOpenLicenseKey:r,setOpenBuy:i}=e,[a,o]=(0,l.useState)(5);(0,l.useEffect)(()=>{t&&c()},[t]);let c=async()=>{for(let e=10;e>=0;e--)o(e),await new Promise(e=>setTimeout(e,1e3))};return(0,n.jsxs)(d.Z,{wide:!0,open:t,setOpen:e=>{0===a&&s(e)},showCloseButton:!1,children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:"\uD83D\uDCA1 A Quick Reminder:"}),(0,n.jsxs)("p",{className:"my-4 text-sm",children:[(0,n.jsx)("b",{children:"TypingMind Beta"})," is ending soon! To continue using the app with all the premium features, you need to enter a license key."]}),(0,n.jsxs)("div",{className:"my-4 text-center flex items-center justify-center flex-wrap gap-2",children:[(0,n.jsx)("button",{onClick:()=>{0===a&&s(!1),setTimeout(()=>{i(!0)},1)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 space-x-1 disabled:bg-gray-500",children:(0,n.jsx)("span",{children:" → Buy a License Key"})}),(0,n.jsxs)("button",{onClick:()=>{0===a&&s(!1),setTimeout(()=>{r(!0)},1)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:bg-gray-500",children:[(0,n.jsx)(eH.itj,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Enter License Key"})]})]}),(0,n.jsx)("div",{className:"mt-4 text-center flex items-center justify-center space-x-2",children:(0,n.jsx)("button",{onClick:()=>s(!1),disabled:a>0,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-800 dark:text-zinc-100 dark:disabled:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:text-gray-400",children:(0,n.jsxs)("span",{children:["I'll do it later",a>0?" (".concat(a,")"):""]})})})]})}(0,i.eK)("useLicenseKey");let eJ="Something went wrong. Please try again.",eY=(0,i.eK)("useUserPrompts"),eG=(0,i.eK)("useFolderList"),eX=(0,i.eK)("useChatsInFolder"),eV=(0,i.eK)("useStreaming"),eQ=(0,i.eK)("useAutomaticTitle"),e$=(0,i.eK)("useSuggestKeywords"),e0=(0,i.eK)("useSuggestKeywords"),e2=(0,i.eK)("useUserCharacters"),e1=(0,i.eK)("useKeyboardShortcuts"),e5=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function e4(e){let{open:t,setOpen:s,chats:r,setChats:a,setOpenBackupSync:o}=e,[c,u]=eY([]),[h,x]=(0,l.useState)({chats:[],folders:[],chatsInFolder:{},userPrompts:[],userCharacters:[]}),[m,f]=e2([]),[g,p]=eG([]),[b,y]=eX({}),[j,v]=(0,l.useState)(0),[w,N]=(0,l.useState)(!1),[k,C]=eV(!1),[S,D]=eQ(!0),[O,I]=e$(!0),[E,K]=e0("google"),[L,_]=e1({search:"K",sidebar:"B"}),F=e=>{let{type:t,value:s}=e;_(e=>({...e,[t]:s}))};(0,l.useEffect)(()=>{if(t){let e=r.map(e=>JSON.parse((0,i.cF)().getItem("CHAT_"+e.id)));x({chats:e,folders:g,chatsInFolder:b,userPrompts:c,userCharacters:m})}},[r,t,g,b,m]);let M=()=>{if(0===h.chats.length&&0===h.folders.length&&0===h.userPrompts.length&&0===h.userCharacters.length){window.alert("Nothing to export.");return}let e=B()(h),t=(0,P.M)(e),s="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({checksum:t,data:h})),n=document.createElement("a");n.setAttribute("href",s),n.setAttribute("download","typingmind-chats-".concat(Date.now(),".json")),document.body.appendChild(n),n.click(),n.remove()},Z=()=>{let e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=e=>{let t=e.target.files[0],s=new FileReader;s.onload=e=>{let t=e.target.result;try{let e=JSON.parse(t);R(e)}catch(e){console.error(e),alert(eJ)}},s.readAsText(t)},e.click()},R=e=>{try{var t,s,n,l,o,d,h,x,b,j,v,w,N,k,C,S;if(!e.checksum||!(e.data||e.chats)){window.alert("This is not a valid archive file or it has been corupted.");return}let T=(0,P.M)(B()(e.data||e.chats));if(T!==e.checksum){window.alert("This archive file has been corrupted. Please try again or contact support.");return}let A=e.data||{chats:e.chats};if(!(null===(t=A.chats)||void 0===t?void 0:t.length)&&!(null===(s=A.folders)||void 0===s?void 0:s.length)&&!(null===(n=A.userPrompts)||void 0===n?void 0:n.length)&&!(null===(l=A.userCharacters)||void 0===l?void 0:l.length)){window.alert("This archive file is empty.");return}let D=[];if((null===(o=A.userPrompts)||void 0===o?void 0:o.length)>0&&D.push("".concat(A.userPrompts.length," ").concat(1===A.userPrompts.length?"prompt":"prompts"," ")),(null===(d=A.userCharacters)||void 0===d?void 0:d.length)>0&&D.push("".concat(null===(S=A.userCharacters)||void 0===S?void 0:S.length," characters")),(null===(h=A.folders)||void 0===h?void 0:h.length)>0&&D.push("".concat(A.folders.length," ").concat(1===A.folders.length?"folder":"folders")),(null===(x=A.chats)||void 0===x?void 0:x.length)>0&&D.push("".concat(A.chats.length," ").concat(1===A.chats.length?"chat":"chats")),D.length>0&&!window.confirm("Importing new ".concat(D.join(", "),". Are you sure?")))return;A.chats.forEach(e=>{e&&(0,i.cF)().setItem("CHAT_"+e.chatID,JSON.stringify(e))});let O=(0,P.FW)(A.chats),I=[...O,...r],E=I.filter((e,t,s)=>t===s.findIndex(t=>t.chatID===e.chatID));a(E);let K=[];if(null===(b=A.folders)||void 0===b?void 0:b.length){let e={};g.forEach(t=>{e[t.id]=t}),A.folders.forEach(t=>{e[t.id]=t}),K=Object.values(e),p(K)}y(e=>({...e,...A.chatsInFolder||{}}));let L=[];if(null===(j=A.userPrompts)||void 0===j?void 0:j.length){let e={};c.forEach(t=>{e[t.id]=t}),A.userPrompts.forEach(t=>{e[t.id]=t}),L=Object.values(e),u(L)}let _=[];if(null===(v=A.userCharacters)||void 0===v?void 0:v.length){let e={};m.forEach(t=>{e[t.id]=t}),A.userCharacters.forEach(t=>{e[t.id]=t}),_=Object.values(e),f(_)}let F=[],M=[];(null===(w=A.userPrompts)||void 0===w?void 0:w.length)&&(F.push("".concat(A.userPrompts.length," prompts")),M.push("".concat(L.length," prompts"))),(null===(N=A.userCharacters)||void 0===N?void 0:N.length)&&(F.push("".concat(A.userCharacters.length," characters")),M.push("".concat(_.length," characters"))),(null===(k=A.folders)||void 0===k?void 0:k.length)&&(F.push("".concat(A.folders.length," folders")),M.push("".concat(K.length," folders"))),(null===(C=A.chats)||void 0===C?void 0:C.length)&&(F.push("".concat(A.chats.length," chats")),M.push("".concat(E.length," chats"))),alert("Imported "+F.join(", ")+". You now have "+M.join(", ")+" on this device. TypingMind will restart now."),window.location.reload()}catch(e){console.error(e),alert(eJ)}},z=h.chats.reduce((e,t)=>{var s;return e+((null==t?void 0:null===(s=t.messages)||void 0===s?void 0:s.length)||0)},0),U=navigator.platform.toUpperCase().includes("MAC"),H=[];return c.length>0&&H.push("<b>".concat(c.length," saved prompt").concat(1===c.length?"":"s","</b>")),m.length>0&&H.push("<b>".concat(m.length," characters</b>")),g.length>0&&H.push("<b>".concat(g.length," folder").concat(1===g.length?"":"s","</b>")),H.push("<b> ".concat(r.length," chat").concat(1===r.length?"":"s","</b>\nwith <b> ").concat(z," message").concat(1===z?"":"s","</b> on this device.")),(0,n.jsxs)(d.Z,{wide:!0,open:t,setOpen:s,showCloseButton:!1,delayMount:!0,children:[(0,n.jsx)("h2",{onClick:()=>{v(j+1),j>10&&setSyncFeatureEnabled(!0)},className:"text-center text-xl font-bold",children:"App Settings"}),(0,n.jsx)("hr",{className:"my-4"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-bold",children:"Preferences"}),(0,n.jsxs)("div",{className:"space-y-4 my-4",children:[(0,n.jsx)(A.Z,{label:"Stream AI responses word by word",description:"Cost estimation doesn't work when stream response is enabled.",enabled:k,setEnabled:C}),(0,n.jsx)(A.Z,{label:"Auto generate title for new chats",description:"Ask ChatGPT to generate a title based on the first message when starting a new chat. This will consume more tokens used in the first message. (All subsequent message tokens will not be affected). This request will use GPT-3.5 to save cost.",enabled:S,setEnabled:D}),(0,n.jsx)(A.Z,{label:"Auto suggest relevant keywords after each message",description:"Ask ChatGPT to suggest relevant keywords if the answer is more than 500 characters long. This will consume more of your token. This request will use GPT-3.5 to save cost.",enabled:O,setEnabled:I}),(0,n.jsxs)("div",{className:"grid grid-cols-2 items-center justify-center gap-2",children:[(0,n.jsx)("div",{className:"text-sm font-semibold text-right",children:"Search Engine"}),(0,n.jsxs)("select",{className:"block w-fit rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 dark:text-white dark:bg-zinc-700 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-blue-600 sm:text-sm sm:leading-6",value:E,onChange:e=>K(e.target.value.toLowerCase()),children:[(0,n.jsx)("option",{value:"google",children:"Google"}),(0,n.jsx)("option",{value:"ddg",children:"DuckDuckGo"}),(0,n.jsx)("option",{value:"bing",children:"Bing"}),(0,n.jsx)("option",{value:"brave",children:"Brave"})]})]})]}),(0,n.jsx)("h3",{className:"text-xl font-bold hidden md:block",children:"Keyboard shortcuts"}),(0,n.jsx)("div",{className:"space-y-4 my-4 hidden md:block",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 items-center justify-center gap-2",children:[(0,n.jsx)("div",{className:"text-sm font-semibold text-right",children:"Open Search"}),(0,n.jsx)("select",{className:"block w-fit rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 dark:text-white dark:bg-zinc-700 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-blue-600 sm:text-sm sm:leading-6",value:L.search,onChange:e=>F({type:"search",value:e.target.value}),children:e5.map(e=>(0,n.jsxs)("option",{value:e,children:[U?"⌘":"Ctrl"," + ",e]},e))}),(0,n.jsx)("div",{className:"text-sm font-semibold text-right",children:"Toggle Sidebar"}),(0,n.jsx)("select",{className:"block w-fit rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 dark:text-white dark:bg-zinc-700 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-blue-600 sm:text-sm sm:leading-6",value:L.sidebar,onChange:e=>F({type:"sidebar",value:e.target.value}),children:e5.map(e=>(0,n.jsxs)("option",{value:e,children:[U?"⌘":"Ctrl"," + ",e]},e))})]})}),(0,n.jsx)("h3",{className:"text-xl font-bold",children:"All Data"}),(0,n.jsx)("div",{className:"my-4",dangerouslySetInnerHTML:{__html:"You have "+H.join(", ")}}),(0,n.jsxs)("div",{className:"my-4 flex items-center justify-center flex-wrap gap-2",children:[(0,n.jsxs)("button",{onClick:M,type:"button",className:"inline-flex items-center px-2 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors",children:[(0,n.jsx)(q.r2j,{className:"w-4 h-4 mr-2"}),(0,n.jsx)("span",{children:"Export"})]}),(0,n.jsxs)("button",{type:"button",onClick:Z,className:"inline-flex items-center px-2 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors",children:[(0,n.jsx)(q.cX4,{className:"w-4 h-4 mr-2"}),(0,n.jsx)("span",{children:"Import"})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>N(!0),className:"inline-flex items-center px-2 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:bg-gray-400 disabled:cursor-default transition-colors",children:[(0,n.jsx)(q.wg8,{className:"w-4 h-4 mr-2"}),(0,n.jsx)("span",{children:"Recover Lost Data"})]})]})]}),w?(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)("div",{className:"text-xs text-gray-500 my-4",children:"If your chats are not showing up, you can try to recover them here. This will find all of the existing chats available in your local storage and recover them. Usually, you don't need to do this, but in some extreme case where there is a browser bug, or TypingMind's storage is corupted by a other browser extensions, you can try to recover your chats here."}),(0,n.jsx)(W,{wait:0,setChats:e=>{a(e),window.location.reload()},showCoruptedMessage:!1,emptyMessage:()=>(0,n.jsx)("div",{className:"text-base font-semibold p-4",children:"No data found on this device"})})]}):null,(0,n.jsx)(T,{}),(0,n.jsx)("div",{className:"text-center my-4",children:(0,n.jsx)("button",{onClick:()=>{s(!1),setTimeout(()=>{o(!0)},400)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors whitespace-nowrap space-x-1",children:"Setup Backup & Sync"})}),(0,n.jsx)("div",{className:"text-center space-x-2 mt-4",children:(0,n.jsxs)("button",{onClick:()=>s(!1),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-default transition-colors whitespace-nowrap space-x-1",children:[(0,n.jsx)(q.bzc,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Done"})]})})]})}let e3=(0,i.eK)("useLicenseKey");function e7(e){let{open:t,setOpen:s,setOpenLicenseKey:r}=e,[l,i]=e3("");return(0,n.jsxs)(d.Z,{wide:!0,open:t,setOpen:s,showCloseButton:!1,children:[(0,n.jsxs)("h2",{className:"text-center text-2xl font-bold flex items-center justify-center space-x-2",children:[(0,n.jsx)(q.WYw,{className:"h-8 w-8 text-red-500","aria-hidden":"true"}),(0,n.jsx)("span",{children:"One Time Purchase"})]}),(0,n.jsx)(ez.Z,{}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsxs)("div",{className:"my-4 grid gap-y-2 gap-x-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,n.jsx)(q.mny,{className:"text-green-500 w-6 h-6 shrink-0"}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("div",{children:"Unlock All Features"}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Search, AI characters, prompt library, etc."})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,n.jsx)(q.mny,{className:"text-green-500 w-6 h-6 shrink-0"}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("div",{children:["Web Search Included"," ",(0,n.jsx)("a",{className:"text-blue-500 hover:underline text-xs",target:"_blank",href:"https://twitter.com/tdinh_me/status/1642554094228504576",children:"(View Demo)"})]}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"ChatGPT with access to the web!"})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,n.jsx)(q.mny,{className:"text-green-500 w-6 h-6 shrink-0"}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("div",{children:["MacOS App"," ",(0,n.jsx)("a",{className:"text-blue-500 hover:underline text-xs",target:"_blank",href:"https://twitter.com/tdinh_me/status/1634111496421793792",children:"(View Demo)"})]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["Maximum convenience (macOS 11.3+)"," "]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-start space-x-1",children:[(0,n.jsx)(q.mny,{className:"text-green-500 w-6 h-6 shrink-0"}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("div",{children:["Self-host Static App"," ",(0,n.jsx)("a",{className:"text-blue-500 hover:underline text-xs",target:"_blank",href:"/self-host-faqs",children:"(Learn More)"})]}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Run the app locally or host on your own domain"})]})]})]})}),(0,n.jsx)("div",{className:"text-xs text-center my-2",children:"Note: You still need an OpenAI API key to use the app. We don't sell API keys."}),(0,n.jsx)("div",{className:"my-2 text-center",children:l?(0,n.jsxs)("div",{className:"text-sm text-center my-2",children:[(0,n.jsx)("div",{className:"text-green-500 font-bold",children:"Thank you for your purchase!"}),(0,n.jsxs)("div",{className:"text-gray-500",children:["Your license key is: ",(0,n.jsxs)("code",{children:["***",l.slice(0,5)]})," ",(0,n.jsx)("button",{onClick:()=>{s(!1),setTimeout(()=>{r(!0)},500)},className:"text-blue-500 hover:underline inline-block",children:"(change)"})]})]}):(0,n.jsx)("button",{onClick:()=>{s(!1),setTimeout(()=>{r(!0)},500)},className:"text-blue-500 hover:underline",children:"I already bought a license"})}),(0,n.jsx)("div",{className:"my-4 text-center",children:(0,n.jsxs)("a",{href:"https://tdinh.lemonsqueezy.com/checkout/buy/4e8d7ea3-0e9e-45b1-bf62-058ade690553",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 hover:bg-green-500 transition-all group",children:[(0,n.jsx)("span",{className:"group-hover:scale-125 transition-all mr-2",children:"→"})," ",l?"Buy Another":"Buy Now"]})}),(0,n.jsx)("div",{className:"my-4 text-center",children:(0,n.jsxs)("a",{href:"https://tdinh.lemonsqueezy.com/checkout/buy/149502c9-ff37-4a51-85b2-cce01e541c52",target:"_blank",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 hover:bg-cyan-500 transition-all group",children:[(0,n.jsx)("span",{className:"group-hover:scale-125 transition-all mr-2",children:"→"})," ","Team License 10 users – $195"]})}),(0,n.jsx)("div",{className:"my-4 text-center",children:(0,n.jsxs)("a",{href:"https://tdinh.lemonsqueezy.com/checkout/buy/fa7b7e2d-0fa3-475e-9360-06850b7e22cf",target:"_blank",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 hover:bg-cyan-500 transition-all group",children:[(0,n.jsx)("span",{className:"group-hover:scale-125 transition-all mr-2",children:"→"})," ","Team License 50 users – $650"]})}),(0,n.jsx)("div",{className:"my-4 text-center",children:(0,n.jsxs)("a",{href:"/branding",target:"_blank",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 hover:bg-cyan-500 transition-all group",children:[(0,n.jsx)("span",{className:"group-hover:scale-125 transition-all mr-2",children:"→"})," ","Custom Branding Package – $49"]})}),(0,n.jsxs)("div",{className:"text-center border border-green-200 bg-green-100 text-sm rounded-md py-1 dark:bg-green-900 dark:border-green-600",children:[(0,n.jsx)("b",{children:"NEW!"})," You can now host a Custom Deployment for your team/organization."," ",(0,n.jsx)("a",{className:"text-blue-500 dark:text-blue-400 hover:underline",href:"https://typingmind.com/custom",target:"_blank",children:(0,n.jsx)("b",{children:"Learn more here →"})})]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500 text-center my-4",children:[(0,n.jsx)("a",{target:"_blank",href:"/privacy",children:"Privacy Policy"})," | ",(0,n.jsx)("a",{target:"_blank",href:"/terms",children:"Terms of Service"})]}),(0,n.jsx)("div",{className:"mt-8 px-4 flex items-center justify-center",children:(0,n.jsx)("a",{href:"https://www.producthunt.com/posts/typing-mind?utm_source=badge-featured&utm_medium=badge&utm_souce=badge-typing-mind",target:"_blank",children:(0,n.jsx)("img",{src:"https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=383464&theme=light",alt:"Typing Mind - A better UI for ChatGPT | Product Hunt",style:{width:"250px",height:"54px"},width:250,height:54})})}),(0,n.jsx)("div",{className:"mt-2 px-4 flex items-center justify-center",children:(0,n.jsx)("a",{href:"https://www.producthunt.com/posts/typing-mind?utm_source=badge-top-post-badge&utm_medium=badge&utm_souce=badge-typing-mind",target:"_blank",children:(0,n.jsx)("img",{src:"https://api.producthunt.com/widgets/embed-image/v1/top-post-badge.svg?post_id=383464&theme=light&period=daily",alt:"Typing Mind - A better UI for ChatGPT | Product Hunt",style:{width:"250px",height:"54px"},width:250,height:54})})}),(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(ea.Z,{})}),(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)(eo.Z,{})})]})}function e8(e){let{verifyLicenseKey:t,licenseVerified:s}=e,[r,i]=(0,l.useState)(!1),[a,o]=(0,l.useState)(!1),[c,u]=(0,l.useState)(""),[h,x]=(0,l.useState)(!1),[m,f]=(0,l.useState)("");(0,l.useEffect)(()=>{"#thankyou"===window.location.hash&&(window.location.hash="",i(!0),setTimeout(()=>{o(!0)},800))},[]),(0,l.useEffect)(()=>{!0===s&&i(!1)},[s]);let g=async()=>{x(!0);let e=await t(c);x(!1),e?i(!1):f("Sorry, that license key is invalid.")};return(0,n.jsxs)(d.Z,{wide:!0,open:r,setOpen:i,showCloseButton:!1,children:[(0,n.jsx)("h2",{className:"text-center text-xl font-bold",children:"\uD83C\uDF89 Thank you for your purchase!"}),(0,n.jsxs)("div",{className:"my-2",children:["You will receive a receipt and a ",(0,n.jsx)("b",{children:"license key"})," in your email shortly. Enter your license key here to save it:"]}),(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)("input",{type:"text",disabled:h,placeholder:"Enter your license key here",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-zinc-700",value:c,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),g())}})}),m?(0,n.jsx)("div",{className:"text-sm text-center text-red-500",children:m}):null,(0,n.jsx)("div",{className:"my-2 text-center",children:(0,n.jsxs)("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 space-x-1 disabled:bg-gray-400",disabled:h,children:[(0,n.jsx)(q.bzc,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Activate"})]})}),(0,n.jsxs)("details",{className:"my-4",children:[(0,n.jsx)("summary",{className:" text-center",children:(0,n.jsx)("h2",{className:"text-center text-xl font-bold cursor-pointer hover:underline inline text-red-500",children:"\uD83D\uDC49 Don't see the receipt email? Click here."})}),(0,n.jsxs)("div",{className:"my-4",children:["There is a current temporary issue with our payment processor"," ",(0,n.jsx)("b",{children:"Lemon Squeezy"})," that causes the receipt emails to be lost for some customers. This happen more frequently with ",(0,n.jsx)("b",{children:"PayPal"})," users."]}),(0,n.jsxs)("div",{className:"my-4",children:["If you ",(0,n.jsx)("b",{children:"have been charged"})," but still don't see the receipt email, please send your ",(0,n.jsx)("b",{children:"Transaction ID"})," or your bank transaction detail to ",(0,n.jsx)("b",{children:"hello@lemonsqueezy.com"})," and CC ",(0,n.jsx)("b",{children:"support@typingmind.com"})," ",". We will check this for you ASAP."]}),(0,n.jsx)("div",{className:"my-4 text-center",children:(0,n.jsx)("a",{className:"text-blue-500 font-semibold hover:underline",href:"mailto:hello@lemonsqueezy.com?cc=support@typingmind.com&subject=Receipt%20and%20License%20Key%20not%20received&body=Hi%20Lemon%20Squeezy%20and%20TypingMind%2C%0D%0A%0D%0AI%20purchased%20a%20license%20key%20from%20TypingMind.com%20via%20Lemon%20Squeezy%20but%20still%20have%20not%20received%20a%20license%20key%20and%20a%20receipt.%0D%0A%0D%0AMy%20transaction%20ID%20is%3A%20%7B%7Byour%20transaction%20ID%20here%7D%7D%0D%0A%0D%0APlease%20help%20check%20this.%0D%0A%0D%0AThanks",children:"\uD83D\uDC49 Click here to open your Email client with prefilled content"})}),(0,n.jsx)("div",{className:"my-4",children:"Very sorry about this inconvenience!"})]}),(0,n.jsx)("div",{className:"my-2 text-center",children:(0,n.jsx)("button",{onClick:()=>i(!1),className:"text-blue-500 hover:underline disabled:text-gray-400",disabled:h,children:"I'll activate later"})}),a&&(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(el.Z,{})})]})}s(50456);var e6=s(30935),e9=s(91799),te=s(80243);let tt=(0,i.eK)("useKeyboardShortcuts");function ts(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function tn(e){let{renderNav:t=()=>{},children:s}=e,[r,i]=(0,l.useState)(!1),[a,o]=(0,l.useState)(null),[c]=tt({sidebar:"B"}),d=!r;return(0,P.bx)(e=>{let{event:t,isMac:s}=e;(!s||t.metaKey)&&(s||t.ctrlKey)&&t.key.toUpperCase()===c.sidebar.toUpperCase()&&(t.preventDefault(),i(e=>!e))}),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"lg:hidden",children:[(0,n.jsx)("button",{onClick:()=>{i(!1)},className:ts("fixed z-40 inset-0 bg-gray-600 bg-opacity-75 opacity-100 transition duration-300",!r&&"!opacity-0 pointer-events-none")}),(0,n.jsxs)("div",{className:ts("fixed top-0 left-0 bottom-0 z-40 flex transition duration-300 pointer-events-none",!r&&"-translate-x-full"),children:[(0,n.jsxs)("div",{className:"relative flex w-full max-w-xs flex-1 flex-col bg-gray-800 pointer-events-auto",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,n.jsxs)("button",{type:"button",className:"ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>{i(!1)},children:[(0,n.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,n.jsx)(te,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})}),t({sidebarOpen:r,setSidebarOpen:i})]}),(0,n.jsx)("div",{className:"w-14 flex-shrink-0"})]})]}),(0,n.jsx)("div",{className:ts("hidden lg:-translate-x-full lg:fixed lg:inset-y-0 lg:flex lg:w-80 lg:flex-col z-40 transition duration-300",d&&"lg:!translate-x-0"),children:t({sidebarOpen:r,setSidebarOpen:i})}),(0,n.jsx)("div",{onTouchMove:e=>{if(!a)return;let t=e.touches[0].clientX-a;t>40&&i(!0)},onTouchStart:e=>{e.touches[0].clientX>50||o(e.touches[0].clientX)},onTouchEnd:()=>{o(null)},className:ts("flex flex-1 flex-col lg:pl-0 transition-all duration-300",d&&"lg:!pl-80"),children:s({desktopSidebarOpen:d,sidebarOpen:r,setSidebarOpen:i})})]})})}var tr=s(7036);let tl=(0,i.eK)("useLicenseKey"),ti=(0,i.eK)("useAPIKey"),ta=(0,i.eK)("useDeletedChatIDs"),to=(0,i.eK)("useLastVerifiedToken"),tc=()=>"ch-"+(0,em.Z)();function td(e){let{serverHostConfig:t}=e,s=(0,l.useRef)(tc()),[a,o]=ti((null==t?void 0:t.orgActive)&&(null==t?void 0:t.licenseToken)||""),[c,d]=(0,l.useState)(a),[u,h]=(0,l.useState)(!1),[m,p]=(0,l.useState)(""),[b,y]=(0,l.useState)([]),[j,v]=(0,l.useState)(s.current),[w,N]=(0,l.useState)([]),[C,S]=tl(""),[T,A]=(0,l.useState)(null!=t&&!!t.managed&&null!=t&&!!t.licenseToken||null),[D,O]=(0,l.useState)(!1),[I,E]=(0,l.useState)(!1),[K,L]=(0,l.useState)(!1),[_,F]=(0,l.useState)(!1),[M,Z]=(0,l.useState)(0),[B,z]=(0,l.useState)(t||{hosted:!1}),[U,H]=(0,l.useState)(!1),[J,Y]=(0,l.useState)(null),[X,V]=(0,l.useState)(null),[Q,$]=(0,l.useState)(!1),[ee,et]=ta([]),[es,en]=(0,l.useState)(-1),[er,el]=to((null==t?void 0:t.managed)?null==t?void 0:t.licenseToken:null),[ei,ea]=(0,l.useState)(!1),[eo,ec]=(0,l.useState)(!1),{syncStats:ed,scheduleSync:eu}=(0,k.m)();(0,l.useEffect)(()=>{a.startsWith("encrypted-")||d(a)},[a]),(0,l.useEffect)(()=>{h(!0),em(),(null==t?void 0:t.managed)===!0||ew(C),eh(),eu()},[]),(0,l.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&(U&&H(!1),eu())};return window.document.addEventListener("visibilitychange",e),()=>{window.document.removeEventListener("visibilitychange",e)}},[]),(0,l.useEffect)(()=>{ef()},[ed]);let eh=()=>{if(!("serviceWorker"in navigator)){console.log("Service worker not supported");return}window.navigator.serviceWorker.register("/sw.js",{scope:"."}).then(function(e){console.log("Service Worker registration successful with scope: ",e.scope)},function(e){console.log("Service Worker registration failed: ",e)})},ex=(0,l.useCallback)(()=>{if(window.location.hash.startsWith("#chat=")){let e=window.location.hash.split("=")[1],t=w.find(t=>t.id===e);t&&(v(t.id),p(t.title),en(-1))}},[w]);(0,l.useEffect)(()=>(w.length&&ex(),window.addEventListener("hashchange",ex),()=>window.removeEventListener("hashchange",ex)),[w]),(0,l.useEffect)(()=>{(0,i.cF)().setItem("TM_useChatList",JSON.stringify(w))},[w]),(0,l.useEffect)(()=>{m&&N(e=>e.map(e=>e.id===j?{...e,title:m}:e))},[m]);let em=async()=>{if(B.hosted)return;let e=window.location.hostname;if("www.typingmind.com"!==e)try{let e=await fetch("/config.json"),t=await e.json();z(t)}catch(e){console.error(e)}},ef=()=>{try{let e=JSON.parse((0,i.cF)().getItem("TM_useChatList")||"[]"),t=e.filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id));N(t)}catch(e){console.error(e)}},eg=e=>{s.current=tc(),N(t=>[e,...t])},ep=e=>{let t=s.current;window.history.replaceState(void 0,void 0,"#chat="+t),e?((0,i.cF)().setItem("CHAT_"+t,JSON.stringify(e)),en(e.messages.length-1),p(e.chatTitle),y(e.messages),eg({...e,id:t})):(p(""),y([]),en(-1)),v(t)},eb=(e,t)=>{let s=JSON.parse((0,i.cF)().getItem("CHAT_"+e));(0,i.cF)().setItem("CHAT_"+e,JSON.stringify({...s,chatTitle:t,syncedAt:null})),e===j&&p(t),N(s=>s.map(s=>s.id===e?{...s,title:t,syncedAt:null}:s)),eu()},ey=e=>{let t=e.id,s=(0,i.cF)().getItem("CHAT_"+t),n=JSON.parse(s),r={...n,favoritedAt:n.favoritedAt?null:new Date,syncedAt:null};(0,i.cF)().setItem("CHAT_"+t,JSON.stringify(r)),N(e=>e.map(e=>e.id===t?{...e,favoritedAt:r.favoritedAt}:e)),eu()},ej=e=>{et(t=>[...t,e]),N(t=>t.filter(t=>t.id!==e)),ep(),setTimeout(()=>{(0,i.cF)().removeItem("CHAT_"+e)},100),eu()},ev=e=>{p(e)},ew=async e=>{if(!e){A(!1);return}try{let t=await fetch("https://www.typingmind.com/api/license",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e})});if(500===t.status){await eN();return}if(t.status>=400){let e=await t.json();console.error(e),A(!1);return}if(!t.ok){console.error(t),A(!1);return}let s=await t.json();try{let e=await (0,P.uM)(s.token);el(s.token),V(e)}catch(e){console.error(e),A(!1);return}return S(e),A(!0),!0}catch(e){console.error(e),await eN()}},eN=async()=>{if(!er){A(!1);return}try{let e=await (0,P.uM)(er);V(e),A(!0)}catch(e){console.error(e),A(!1)}},ek=e=>{y(e)},eC=e=>{N(t=>t.map(t=>{var s;return t.id===j?{...t,updatedAt:Date.now(),preview:(null==e?void 0:null===(s=e.content)||void 0===s?void 0:s.substring(0,50))||""}:t})),"assistant"===e.role&&eu();let t=Math.floor((Date.now()-M)/1e3);b.length>1&&!T&&t>120&&(F(!0),Z(Date.now()))},eS=()=>{ea(!0)},eT=()=>{L(!0)},eA=e=>{N(t=>t.filter(t=>!e.includes(t.id))),setTimeout(()=>{e.forEach(e=>{(0,i.cF)().removeItem("CHAT_"+e)})},100)},eD=(0,l.useMemo)(()=>{try{let e=(0,i.cF)().getItem("CHAT_"+j);if(e){let t=JSON.parse(e);return t}}catch(e){console.error(e)}},[j]);return(0,n.jsxs)("div",{children:[B.hosted?(0,n.jsx)(r.Z,{showNotification:U,hostConfig:B},"hosted"):(0,n.jsx)(r.Z,{showNotification:U},"cloud"),(0,n.jsx)(tn,{renderNav:e=>{let{sidebarOpen:t,setSidebarOpen:s}=e;return(0,n.jsx)(eL,{chatID:j,chats:w,onDeleteChat:ej,onDeleteChats:eA,onEditChatTitle:eb,onNewChatRequested:ep,onChatSelected:e=>{window.history.replaceState(void 0,void 0,"#chat="+e.id),v(e.id),p(e.title),en(-1),s(!1)},sidebarOpen:t,setSidebarOpen:s,licenseVerified:T,setLicenseVerified:A,setOpenBuy:O,setOpenLicenseKey:E,onOpenSettings:eT,hostConfig:B,onToggleFavorite:ey,licensePayload:X,setOpenBackupSync:$,verifyLicenseKey:ew,decryptedApiKey:c,setOpenDecrypt:ec})},children:e=>{let{desktopSidebarOpen:t,sidebarOpen:s,setSidebarOpen:r}=e;return(0,n.jsxs)("main",{className:"relative",children:[(0,n.jsxs)("div",{className:"hide-when-print sticky top-0 z-30 bg-white dark:bg-zinc-700 backdrop-blur",children:[(0,n.jsx)("div",{className:"flex absolute left-1 top-0 bottom-0 items-center justify-center",children:(0,n.jsxs)("button",{type:"button",className:"inline-flex h-12 w-12 items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 dark:hover:text-gray-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),r(e=>!e)},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),r(e=>!e)},children:[(0,n.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,n.jsx)(e9,{className:"h-6 w-6","aria-hidden":"true"})]})}),B.hosted?null:(0,n.jsx)("div",{className:"absolute right-2 top-0 bottom-0 flex items-center justify-center",children:u?(0,n.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md text-gray-700 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 py-2 px-2 space-x-2 text-sm",onClick:()=>O(!0),children:(0,n.jsx)(q.WYw,{className:"h-6 w-6 text-red-500","aria-hidden":"true"})}):null}),u?(0,n.jsx)(e6.Z,{chatID:j,model:J,chatTitle:m,messages:b}):(0,n.jsx)("div",{className:"text-center py-4 font-semibold text-gray-500 flex items-center justify-center",children:(0,n.jsx)(f.Z,{})})]}),B.hosted?(0,n.jsx)("div",{className:"p-6 sm:p-10 flex items-center justify-center",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("img",{src:B.logoURL||"/favicon-192x192.png",alt:B.brand,className:"rounded-lg w-12 h-12"}),(0,n.jsx)("div",{className:"font-semibold text-4xl sm:text-5xl text-black dark:text-white ",children:B.brand})]}),(0,n.jsx)("div",{className:"text-center my-4 font-light text-base sm:text-xl my-4 sm:my-6 text-black dark:text-white",children:B.tagline}),B.managed?null:(0,n.jsx)(e_.Z,{onCompleted:()=>{setError(""),textareaRef.current.focus()}})]})}):null,0===w.length?(0,n.jsx)(W,{setChats:N}):null,u?(0,n.jsx)(eM,{children:e=>{let{defaultMessages:s}=e;return(0,n.jsx)(tr.Z,{apiKey:c,licenseKey:(null==B?void 0:B.managed)?null==B?void 0:B.orgID:C,onUnauthorized:(null==B?void 0:B.managed)?eS:null,setOpenBuy:O,chatID:j,chatTitle:m,defaultMessages:s,onMessagesChanged:ek,onNewChatPersisted:eg,onNewChatRequested:ep,onChatTitleUpdated:ev,onChatUpdated:eC,includeChatID:B.managed,showBrand:!B.hosted,onModelChanged:Y,onNotification:H,preloadChatData:eD,defaultEdittingIndex:es,botAvatar:B?B.logoURL:void 0,completionEndpoint:B.managed?"/api/hosted/completions2":void 0,withSidebar:t,onChatSelected:e=>{window.history.replaceState(void 0,void 0,"#chat="+e.id),v(e.id),p(e.title),en(-1)}},j)}}):null,(0,n.jsx)(e8,{licenseVerified:T,verifyLicenseKey:ew})]})}}),(0,n.jsx)(e7,{setOpenLicenseKey:E,open:D,setOpen:O}),(0,n.jsx)(G,{open:I,setOpen:E,setOpenBuy:O,setLicenseVerified:A,verifyLicenseKey:ew}),(0,n.jsx)(eq,{open:_,setOpen:F,setOpenLicenseKey:E,setOpenBuy:O}),u?(0,n.jsx)(eU,{}):null,(0,n.jsx)(e4,{open:K,setOpen:L,chats:w,setChats:N,setOpenBackupSync:$}),(0,n.jsx)(R,{open:Q,setOpen:$,licensePayload:X}),(0,n.jsx)(eR,{onLoaded:ef}),(0,n.jsx)(x,{decryptedApiKey:c,setDecryptedApiKey:d,open:eo,setOpen:ec}),B.managed?(0,n.jsx)(g,{open:ei,setOpen:ea,hostConfig:B,orgActive:B.orgActive}):null,(0,n.jsx)("div",{id:"check-123 hidden"})]})}},42480:function(){}},function(e){e.O(0,[774,445,617,228,260,662,874,556,714,748,767,564,840,201,888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);